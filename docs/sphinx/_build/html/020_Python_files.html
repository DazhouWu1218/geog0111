
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>020 Files and other Resources &#8212; GEOG0111 Scientific Computing 1.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="021 Read and Write: Streams" href="021_Read_text_files.html" />
    <link rel="prev" title="019 Python codes : Answers to exercises" href="018_Running_Python_answers.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="files-and-other-resources">
<h1>020 Files and other Resources<a class="headerlink" href="#files-and-other-resources" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h3>
<p>In this session, we will learn about files and similar resources. We will introduce the standard Python library <a class="reference external" href="https://docs.python.org/3/library/pathlib.html"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a> which is how we deal with file paths, as well as the local package <a class="reference external" href="geog0111/gurlpath.py">gurlpath</a> that allows a similar object-oriented approach with files and other objects on the web. The treatment is intentionally high-level. If you need to go deeper into calls to URLs, you should look at the Python packages: <a class="reference external" href="https://docs.python.org/3.7/library/urllib.parse.html">urllib.parse</a>, <a class="reference external" href="https://requests.readthedocs.io/en/master/">requests</a> and <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a>.</p>
</div>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>You will need some understanding of the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="001_Notebook_use.html"><span class="doc">001 Using Notebooks</span></a></p></li>
<li><p><a class="reference internal" href="002_Unix.html"><span class="doc">002 Unix</span></a> with a good familiarity with the UNIX commands we have been through.</p></li>
<li><p><a class="reference internal" href="003_Help.html"><span class="doc">003 Getting help</span></a></p></li>
<li><p><a class="reference internal" href="004_Accounts.html"><span class="doc">004_Accounts</span></a></p></li>
<li><p><a class="reference internal" href="010_Python_Introduction.html"><span class="doc">010 Variables, comments and print()</span></a></p></li>
<li><p><a class="reference internal" href="011_Python_data_types.html"><span class="doc">011 Data types</span></a></p></li>
<li><p><a class="reference internal" href="012_Python_strings.html"><span class="doc">012 String formatting</span></a></p></li>
<li><p><a class="reference internal" href="013_Python_string_methods.html"><span class="doc">013_Python_string_methods</span></a></p></li>
<li><p><a class="reference external" href="018_Packages">018_Packages</a></p></li>
</ul>
</div>
<div class="section" id="test">
<h3>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>You should run a <a class="reference external" href="notebooks/004_Accounts.md#Test">NASA account test</a> if you have not already done so.</p>
</div>
<div class="section" id="timing">
<h3>Timing<a class="headerlink" href="#timing" title="Permalink to this headline">¶</a></h3>
<p>The session should take around 30 minutes.</p>
</div>
</div>
<div class="section" id="data-resources">
<h2>Data resources<a class="headerlink" href="#data-resources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="resource-location">
<h3>Resource location<a class="headerlink" href="#resource-location" title="Permalink to this headline">¶</a></h3>
<p>We store information on a computer in files, or file-like resources. We will use the term ‘file’ below to mean either of these concepts, other than specific issues relating to particular types of file/resource.</p>
<p>To get information from files, we need to be able to specify some <strong>address</strong> for the file/resource location, along with some way of interacting with the file. These concepts are captured in the idea of a <a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier">URI</a> (Uniform Resource Indicator). You will most likely have come across the related idea of a <a class="reference external" href="https://en.wikipedia.org/wiki/URL">Uniform Resource Locator (URL)</a>, which is a URL such as <a class="reference external" href="https://www.geog.ucl.ac.uk/people/academic-staff/philip-lewis">https://www.geog.ucl.ac.uk/people/academic-staff/philip-lewis</a>
that gives:</p>
<ul class="simple">
<li><p>the location of the resource: <code class="docutils literal notranslate"><span class="pre">people/academic-staff/philip-lewis</span></code></p></li>
<li><p>the access and interpretation protocol: <a class="reference external" href="https://en.wikipedia.org/wiki/HTTPS"><code class="docutils literal notranslate"><span class="pre">https</span></code></a> (secure <a class="reference external" href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"><code class="docutils literal notranslate"><span class="pre">http</span></code></a>)</p></li>
<li><p>the network domain name: <a class="reference external" href="https://www.geog.ucl.ac.uk"><code class="docutils literal notranslate"><span class="pre">www.geog.ucl.ac.uk</span></code></a></p></li>
</ul>
<p>When we visit this URL using an appropriate tool such as a browser, the tool can access and interpret the information in the resource: in this case, interpret the <a class="reference external" href="https://www.w3schools.com/html">html code</a> in the file pointed to by the URL.</p>
<p>Similarly, we will be used to the idea of accessing <code class="docutils literal notranslate"><span class="pre">files</span></code> on the computer. These may be in the local file system, or on some network or cloud storage that might be accessible from the local file system. An example of such a file would be some Python code file such as
<a class="reference external" href="http://localhost:8888/edit/notebooks/geog0111/helloWorld.py"><code class="docutils literal notranslate"><span class="pre">geog0111/helloWorld.py</span></code></a>.</p>
</div>
<div class="section" id="binary-and-text-data">
<h3>binary and text data<a class="headerlink" href="#binary-and-text-data" title="Permalink to this headline">¶</a></h3>
<p>It is useful at this point to distinguish text (ASCII) and binary resources. Text resources are in a human-readable format, so you can just directly ‘look at’ the file contents to see what is there. Examples of this are <a class="reference external" href="https://en.wikipedia.org/wiki/Comma-separated_values">csv-format</a> files, <a class="reference external" href="https://en.wikipedia.org/wiki/HTML">html pages</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">yaml</a> or <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">json</a> configuration files, and even these <a class="reference external" href="https://jupyter.org/">Jupyter notebooks</a>.</p>
<p>Information in text files is, as noted, easily readable: you can open the file in any text editor to see the contents. However, for large datasets, and datasets with particular structures (e.g. on grids), it is very inefficient.</p>
<p>Typical <strong>binary</strong> files include (most) image data and compressed data (e.g. <a class="reference external" href="https://en.wikipedia.org/wiki/Zip_(file_format)">zip</a> files), where size is more important, as well as encrypted data, where human-readability might not be desirable.</p>
<p>Text files designed for different purposes will mostly have some format definition or conventions. This means that although we can easily scan e.g. a <a class="reference external" href="https://json.org/example.html%60">json file</a>, there is a set way of laying such files out, so we can interpret them by eye or in software.</p>
<p>Binary files will also have some defined format, but in this case, the user is generally forced to use some software reader to interpret the data correctly.</p>
<p>When you wish to access some file or dataset, you will generally know which format the file will be in, so can target an appropriate reader. Quite often though, we have to we might need to examine a dataset before deciding on some parameters for an interpreter, particularly with text datasets.</p>
<p>In these notes, we will learn how to access and use binary and text datasets in Python, but from the local file system, and online from URLs.</p>
<p>We first need to learn some core tools for file and URL access. We will be using the object-oriented <a class="reference external" href="https://docs.python.org/3/library/pathlib.html"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a> package for local files, and a local variant of <a class="reference external" href="https://github.com/chrono-meter/urlpath"><code class="docutils literal notranslate"><span class="pre">urlpath</span></code></a> called <a class="reference external" href="geog0111/gurlpath.py"><code class="docutils literal notranslate"><span class="pre">gurlpath</span></code></a>.</p>
<p>We will be also using <code class="docutils literal notranslate"><span class="pre">yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">json</span></code> and <a class="reference external" href="https://pandas.pydata.org/"><code class="docutils literal notranslate"><span class="pre">pandas</span></code></a> packages for reading particular text file types, and introducing <a class="reference external" href="https://gdal.org/python/"><code class="docutils literal notranslate"><span class="pre">gdal</span></code></a> for binary image files.</p>
</div>
</div>
<div class="section" id="path-import">
<h2><code class="docutils literal notranslate"><span class="pre">Path</span></code>, <code class="docutils literal notranslate"><span class="pre">import</span></code><a class="headerlink" href="#path-import" title="Permalink to this headline">¶</a></h2>
<p>We have come across the idea of packages in <a class="reference internal" href="005_Packages.html"><span class="doc">005 Packages</span></a>. <code class="docutils literal notranslate"><span class="pre">Path</span></code> is part of the <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> package, so in any Python codes, we first must import this into our workspace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</pre></div>
</div>
<p>This imports the module <code class="docutils literal notranslate"><span class="pre">Path</span></code> from the library <code class="docutils literal notranslate"><span class="pre">pathlib</span></code>.</p>
<p>We may repeat this <code class="docutils literal notranslate"><span class="pre">import</span></code> in the codes below, for illustration purposes. You need only import it once in any file or session though.</p>
<div class="section" id="posix">
<h3><code class="docutils literal notranslate"><span class="pre">posix</span></code><a class="headerlink" href="#posix" title="Permalink to this headline">¶</a></h3>
<p>The main class we will use from <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> is <code class="docutils literal notranslate"><span class="pre">Path</span></code>. This provides an object-oriented way of dealing with files and paths, that is portable to any operating system. Recall from <a class="reference internal" href="002_Unix.html"><span class="doc">002 Unix</span></a> that unix-like operating systems use <code class="docutils literal notranslate"><span class="pre">posix</span></code> filenames, separated by forward slash <code class="docutils literal notranslate"><span class="pre">/</span></code> (or just <em>slash</em>). Windows uses a backslash <code class="docutils literal notranslate"><span class="pre">\</span></code>. But <em>we</em> want to write Python codes that are generic and shouldn’t need to greatly worry about such issues. Using <code class="docutils literal notranslate"><span class="pre">Path</span></code> greatly helps in this regard, though there will always the occasional time we do need to distinguish <code class="docutils literal notranslate"><span class="pre">posix</span></code> and non-<code class="docutils literal notranslate"><span class="pre">posix</span></code> systems.</p>
<p>### Common <code class="docutils literal notranslate"><span class="pre">Path</span></code> methods</p>
<p>We can start with a table of <a class="reference external" href="https://stackabuse.com/introduction-to-the-python-pathlib-module/#:~:text=The%20Pathlib%20module%20can%20deal,(usually%20the%20current%20directory).">commonly-used methods</a> using <code class="docutils literal notranslate"><span class="pre">Path</span></code> and give their <a class="reference internal" href="002_Unix.html"><span class="doc">Unix equivalents</span></a>, most of which we have already learned.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>command</th>
<th>unix-equivalent</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Path.cwd()</code></td>
<td><code>pwd</code></td>
<td>Return path object representing the current working directory</td>
</tr>
<tr>
<td><code>Path.home()</code></td>
<td><code>~</code></td>
<td>Return path object representing the home directory</td>
</tr>
<tr>
<td><code>Path.stat()</code></td>
<td><code>ls -l</code>*</td>
<td>return info about the path. File size is <code>Path.stat().st_size</code></td>
</tr>
<tr>
<td><code>Path.chmod()</code></td>
<td><code>chmod</code></td>
<td>change file mode and permissions</td>
</tr>
<tr>
<td><code>Path.glob(pattern)</code></td>
<td><code>ls *</code></td>
<td>Glob the pattern given in the directory that is represented by the path, yielding matching files of any kind</td>
</tr>
<tr>
<td><code>Path.mkdir()</code></td>
<td><code>mkdir</code></td>
<td>to create a new directory at the given path</td>
</tr>
<tr>
<td><code>Path.rename()</code></td>
<td><code>mv</code></td>
<td>Rename a file or directory to the given target</td>
</tr>
<tr>
<td><code>Path.rmdir()</code></td>
<td><code>rmdir</code></td>
<td>Remove the empty directory</td>
</tr>
<tr>
<td><code>Path.unlink()</code></td>
<td><code>rm</code></td>
<td>Remove the file or symbolic link</td>
</tr>
</tbody>
</table><p><code class="docutils literal notranslate"><span class="pre">*</span></code> Really, <code class="docutils literal notranslate"><span class="pre">Path.stat()</span></code> equates to the <code class="docutils literal notranslate"><span class="pre">unix</span></code> command <code class="docutils literal notranslate"><span class="pre">stat</span></code>, but this contains the information we access using <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code>.</p>
<p>Since we are already familiar with most of these commands in <code class="docutils literal notranslate"><span class="pre">unix</span></code>, we can get straight into using them:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;I am in directory </span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;My home is </span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">am</span> <span class="ow">in</span> <span class="n">directory</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">GitHub</span><span class="o">/</span><span class="n">geog0111</span><span class="o">/</span><span class="n">notebooks</span>
<span class="n">My</span> <span class="n">home</span> <span class="ow">is</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span>
</pre></div>
</div>
<p>To keep the filenames generic, we can form a filename from a list using <code class="docutils literal notranslate"><span class="pre">Path()</span></code>, so <code class="docutils literal notranslate"><span class="pre">Path('bin','README')</span></code> would refer to the filename <code class="docutils literal notranslate"><span class="pre">bin/README</span></code> on a <code class="docutils literal notranslate"><span class="pre">posix</span></code> system, and <code class="docutils literal notranslate"><span class="pre">bin/README</span></code> on Windows. However, this is interpreted the same as just using <code class="docutils literal notranslate"><span class="pre">bin/README</span></code> which will often be clearer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span><span class="s1">&#39;README&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin/README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;they are the same&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">they</span> <span class="n">are</span> <span class="n">the</span> <span class="n">same</span>
</pre></div>
</div>
<p>We can use the function <code class="docutils literal notranslate"><span class="pre">exists</span></code> to check if a file exists:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">readme_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin/README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Does </span><span class="si">{</span><span class="n">readme_file</span><span class="si">}</span><span class="s1"> exist? </span><span class="si">{</span><span class="n">readme_file</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Does bin/README exist? True
</pre></div>
</div>
<p>To add a sub-directory or file to a <code class="docutils literal notranslate"><span class="pre">Path</span></code> object, we can use the list form, or we can just specify the separator ‘/’ between the components, provided the first term is a <code class="docutils literal notranslate"><span class="pre">Path</span></code> object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># the relative directory bin</span>
<span class="n">bindir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;starting from the relative directory &quot;bin&quot;: </span><span class="si">{</span><span class="n">bindir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># add README to the path</span>
<span class="n">readme_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">bindir</span><span class="p">,</span><span class="s1">&#39;README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;README file is: </span><span class="si">{</span><span class="n">readme_file</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># another way to do it using /</span>
<span class="n">readme_file</span> <span class="o">=</span> <span class="n">bindir</span><span class="o">/</span><span class="s1">&#39;README&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;README file is: </span><span class="si">{</span><span class="n">readme_file</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">starting</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">relative</span> <span class="n">directory</span> <span class="s2">&quot;bin&quot;</span><span class="p">:</span> <span class="nb">bin</span>
<span class="n">README</span> <span class="n">file</span> <span class="ow">is</span><span class="p">:</span> <span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
<span class="n">README</span> <span class="n">file</span> <span class="ow">is</span><span class="p">:</span> <span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
</pre></div>
</div>
<div class="section" id="exercise-1">
<h4>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h4>
<p>There is a file called <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> in the directory <code class="docutils literal notranslate"><span class="pre">copy</span></code>.</p>
<ul class="simple">
<li><p>use <code class="docutils literal notranslate"><span class="pre">Path</span></code> to generate the a variable <code class="docutils literal notranslate"><span class="pre">copy_dir</span></code> containing the pathname of the <code class="docutils literal notranslate"><span class="pre">copy</span></code> directory</p></li>
<li><p>create a variable <code class="docutils literal notranslate"><span class="pre">env_file</span></code> which adds add the file <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> to this</p></li>
<li><p>check to see if the file exists</p></li>
</ul>
<p>To create a directory, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">mkdir</span><span class="p">()</span>
</pre></div>
</div>
<p>We can use the options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>which will make all of the sub-directories needed, and also no fail if the directory already exists. This is often the safest way to make a directory in your code, provided you are sure that your path will be reasonable.</p>
<p>To remove an empty directory, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Path</span><span class="p">()</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that there is no recursive delete in <code class="docutils literal notranslate"><span class="pre">pathlib</span></code>: you have to delete files and directories explicitly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># make a temp directory</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># look inside tmp</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;files in </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># generate directory inside</span>
<span class="n">inside</span> <span class="o">=</span> <span class="n">tmp</span> <span class="o">/</span> <span class="s1">&#39;inside&#39;</span>
<span class="c1"># create this</span>
<span class="n">inside</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># look inside tmp</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;files in </span><span class="si">{</span><span class="n">tmp</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">))</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># delete inside if it is a directory</span>
<span class="n">inside</span><span class="o">.</span><span class="n">is_dir</span> <span class="ow">and</span> <span class="n">inside</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>
<span class="c1"># then delete tmp</span>
<span class="n">tmp</span><span class="o">.</span><span class="n">is_dir</span> <span class="ow">and</span> <span class="n">tmp</span><span class="o">.</span><span class="n">rmdir</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">files</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span> <span class="p">[]</span>
<span class="n">files</span> <span class="ow">in</span> <span class="n">tmp</span><span class="p">:</span> <span class="p">[</span><span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;tmp/inside&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>### File information</p>
<p>The file permissions format we are used to from <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span></code> is accessed through <code class="docutils literal notranslate"><span class="pre">filename.stat().st_mode</span></code> but needs to be converted to octal to match to <code class="docutils literal notranslate"><span class="pre">ls</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">oct</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mode</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># similar information to ls -l</span>
<span class="n">readme</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span><span class="s1">&#39;README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;README file is </span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;       size is </span><span class="si">{</span><span class="n">readme</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="si">}</span><span class="s1"> bytes&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;       mode is </span><span class="si">{</span><span class="nb">oct</span><span class="p">(</span><span class="n">readme</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_mode</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;      owner is </span><span class="si">{</span><span class="n">readme</span><span class="o">.</span><span class="n">owner</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">README</span> <span class="n">file</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
       <span class="n">size</span> <span class="ow">is</span> <span class="mi">16</span> <span class="nb">bytes</span>
       <span class="n">mode</span> <span class="ow">is</span> <span class="mo">0o100644</span>
      <span class="n">owner</span> <span class="ow">is</span> <span class="n">plewis</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="glob-generators">
<h3><code class="docutils literal notranslate"><span class="pre">glob</span></code> generators<a class="headerlink" href="#glob-generators" title="Permalink to this headline">¶</a></h3>
<p>To use a wildcard (or any pattern) to refer to a list of files, we use <code class="docutils literal notranslate"><span class="pre">Path.glob()</span></code> (or <code class="docutils literal notranslate"><span class="pre">Path.rglob()</span></code> for a recursive list). This function returns a generator, which is a special type of list whereby the items in the list are produced on demand (as we use them).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># use glob to get a list of filenames in the directory bin </span>
<span class="c1"># that end with .sh -&gt; pattern *.sh using a wildcard</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.sh&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The generator does not have all of the attributes of a list, so we cannot, for example, know the length, withjout first converting it tot a list. It is intended that you step through it one item at a time. This is usually done in a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, or similar construct:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">filenames</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;file </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">file</span> <span class="mi">0</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">notebook</span><span class="o">-</span><span class="n">mkdocs</span><span class="o">.</span><span class="n">sh</span>
<span class="n">file</span> <span class="mi">1</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">setup</span><span class="o">.</span><span class="n">sh</span>
<span class="n">file</span> <span class="mi">2</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">notebook</span><span class="o">-</span><span class="n">run</span><span class="o">.</span><span class="n">sh</span>
<span class="n">file</span> <span class="mi">3</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">link</span><span class="o">-</span><span class="nb">set</span><span class="o">.</span><span class="n">sh</span>
<span class="n">file</span> <span class="mi">4</span> <span class="ow">is</span> <span class="nb">bin</span><span class="o">/</span><span class="n">git</span><span class="o">-</span><span class="n">remove</span><span class="o">-</span><span class="nb">all</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The advantage of a generator is that it will generally need less memory than fully calculating all items in a list. Once we move on to the next item in the generator, any memory used by current item is freed.</p>
<p>But is the size of objects is small, you will not notice much impact if you convert the generator to a list.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filenames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.sh&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;bin/notebook-mkdocs.sh&#39;</span><span class="p">),</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;bin/setup.sh&#39;</span><span class="p">),</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;bin/notebook-run.sh&#39;</span><span class="p">),</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;bin/link-set.sh&#39;</span><span class="p">),</span> <span class="n">PosixPath</span><span class="p">(</span><span class="s1">&#39;bin/git-remove-all.sh&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Let’s use <code class="docutils literal notranslate"><span class="pre">glob</span></code> now to get the file permissions of each file <code class="docutils literal notranslate"><span class="pre">n*</span></code> in the directory <code class="docutils literal notranslate"><span class="pre">bin</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># use glob to get a list of filenames in the directory bin </span>
<span class="c1"># that end with .sh -&gt; pattern n* using a wildcard</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;n*&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="si">:</span><span class="s1">25s</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">notebook</span><span class="o">-</span><span class="n">mkdocs</span><span class="o">.</span><span class="n">sh</span>   
<span class="nb">bin</span><span class="o">/</span><span class="n">notebook</span><span class="o">-</span><span class="n">run</span><span class="o">.</span><span class="n">sh</span>      
</pre></div>
</div>
<div class="section" id="exercise-2">
<h4>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">Path</span></code> to show the file permissions of all files that end <code class="docutils literal notranslate"><span class="pre">.sh</span></code> in the directory <code class="docutils literal notranslate"><span class="pre">bin</span></code></p></li>
</ul>
<p>### <code class="docutils literal notranslate"><span class="pre">absolute</span></code>, <code class="docutils literal notranslate"><span class="pre">parts</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code></p>
<p>We can use <code class="docutils literal notranslate"><span class="pre">Path</span></code> to convert filenames between relative and absolute representations using <code class="docutils literal notranslate"><span class="pre">absolute()</span></code> and <code class="docutils literal notranslate"><span class="pre">relative_to()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;I am in </span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># define a relative path name</span>
<span class="n">readme</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin/README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;original relative name:</span><span class="se">\n\t</span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># convert to absolute</span>
<span class="n">readme</span> <span class="o">=</span> <span class="n">readme</span><span class="o">.</span><span class="n">absolute</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;absolute name:</span><span class="se">\n\t</span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># now make a relative pathname, </span>
<span class="c1"># reletive to current working directory</span>
<span class="n">readme</span> <span class="o">=</span> <span class="n">readme</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;name relative to </span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="si">}</span><span class="s1">:</span><span class="se">\n\t</span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">am</span> <span class="ow">in</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">GitHub</span><span class="o">/</span><span class="n">geog0111</span><span class="o">/</span><span class="n">notebooks</span>
<span class="n">original</span> <span class="n">relative</span> <span class="n">name</span><span class="p">:</span>
	<span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
<span class="n">absolute</span> <span class="n">name</span><span class="p">:</span>
	<span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">GitHub</span><span class="o">/</span><span class="n">geog0111</span><span class="o">/</span><span class="n">notebooks</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
<span class="n">name</span> <span class="n">relative</span> <span class="n">to</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">GitHub</span><span class="o">/</span><span class="n">geog0111</span><span class="o">/</span><span class="n">notebooks</span><span class="p">:</span>
	<span class="nb">bin</span><span class="o">/</span><span class="n">README</span>
</pre></div>
</div>
<p>Quite often we need to split some filename up into its constituent parts. This is achieved with <code class="docutils literal notranslate"><span class="pre">paths</span></code> which gives a list of the file name tree:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">readme</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin/README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">readme</span><span class="o">.</span><span class="n">parts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;README&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We could use that to get at the filename <code class="docutils literal notranslate"><span class="pre">README</span></code> from the last item in the list, but a more object-oriented way is to use <code class="docutils literal notranslate"><span class="pre">name</span></code> (and <code class="docutils literal notranslate"><span class="pre">parent</span></code> to get the directory up to that point):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">readme</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bin&#39;</span><span class="p">,</span><span class="s1">&#39;README&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;name   of </span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">readme</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;parent of </span><span class="si">{</span><span class="n">readme</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">readme</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span>   <span class="n">of</span> <span class="nb">bin</span><span class="o">/</span><span class="n">README</span> <span class="ow">is</span> <span class="n">README</span>
<span class="n">parent</span> <span class="n">of</span> <span class="nb">bin</span><span class="o">/</span><span class="n">README</span> <span class="ow">is</span> <span class="nb">bin</span>
</pre></div>
</div>
<p>#### Exercise 3</p>
<ul class="simple">
<li><p>print out the absolute pathname of the directory that <code class="docutils literal notranslate"><span class="pre">images/ucl.png</span></code> is in</p></li>
<li><p>check that the file exists</p></li>
<li><p>if it does, print the size of the file in KB to two decimal places</p></li>
</ul>
<p>You will need to know how many Bytes in a Kilobyte, and how to <a class="reference external" href="012_Python_strings.md#String-formating">format a string to two decimal places</a>. You will also need to remember how to use <a class="reference external" href="015_Python_control.md#Comparison-Operators-and-if"><code class="docutils literal notranslate"><span class="pre">if</span></code> statements</a>.</p>
<p>## Resources from a URL</p>
</div>
</div>
<div class="section" id="gurlpath-st-size">
<h3><code class="docutils literal notranslate"><span class="pre">gurlpath</span></code>, <code class="docutils literal notranslate"><span class="pre">st_size</span></code><a class="headerlink" href="#gurlpath-st-size" title="Permalink to this headline">¶</a></h3>
<p>The library <a class="reference external" href="geog0111/gurlpath.py"><code class="docutils literal notranslate"><span class="pre">gurlpath</span></code></a> in <a class="reference external" href="geog0111">geog0111</a> is designed to operate in a similar manner to <code class="docutils literal notranslate"><span class="pre">pathlib</span></code> for reading data from URLs. It is derived from <a class="reference external" href="https://github.com/chrono-meter/urlpath"><code class="docutils literal notranslate"><span class="pre">urlpath</span></code></a>  which in turn is based on <a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html">urllib.parse</a> and <a class="reference external" href="https://requests.readthedocs.io/en/master/">requests</a>. It uses <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/"><code class="docutils literal notranslate"><span class="pre">BeautifulSoup</span></code></a> for parsing <code class="docutils literal notranslate"><span class="pre">html</span></code> data. At some point you may wish to learn how to use these lower-level packages, but for learning on this course, you will find it convenient to use this higher-level package.</p>
<p>The object in <code class="docutils literal notranslate"><span class="pre">gurlpath</span></code> corresponding to <code class="docutils literal notranslate"><span class="pre">Path</span></code> is <code class="docutils literal notranslate"><span class="pre">URL</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">geog0111.gurlpath</span> <span class="kn">import</span> <span class="n">URL</span>
<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;https://www.metoffice.gov.uk/&#39;</span>
<span class="n">site_dir</span> <span class="o">=</span> <span class="s1">&#39;hadobs/hadukp/data/monthly&#39;</span>
<span class="n">site_file</span> <span class="o">=</span> <span class="s1">&#39;HadSEEP_monthly_qc.txt&#39;</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">site_dir</span><span class="p">,</span><span class="n">site_file</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;remote file </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;size is </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="o">/</span><span class="mi">1024</span> <span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> KB&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">remote</span> <span class="n">file</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">metoffice</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">hadobs</span><span class="o">/</span><span class="n">hadukp</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">monthly</span><span class="o">/</span><span class="n">HadSEEP_monthly_qc</span><span class="o">.</span><span class="n">txt</span>
<span class="n">size</span> <span class="ow">is</span> <span class="mf">4.77</span> <span class="n">KB</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">geog0111.gurlpath</span> <span class="kn">import</span> <span class="n">URL</span>

<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="n">site_dir</span> <span class="o">=</span> <span class="s1">&#39;MOTA/MCD15A3H.006/2020.01.01&#39;</span>
<span class="n">site_file</span> <span class="o">=</span> <span class="s1">&#39;MCD15A3H.A2020001.h08v06.006.2020006032951.hdf&#39;</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">site_dir</span><span class="p">,</span><span class="n">site_file</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;remote file </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;size is </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="o">/</span><span class="mi">1024</span> <span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1"> KB&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">remote</span> <span class="n">file</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.01</span><span class="o">.</span><span class="mi">01</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020001</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020006032951</span><span class="o">.</span><span class="n">hdf</span>
<span class="n">size</span> <span class="ow">is</span> <span class="mf">8854.67</span> <span class="n">KB</span>
</pre></div>
</div>
<p>We have similar functionality in <code class="docutils literal notranslate"><span class="pre">URL</span></code> to <code class="docutils literal notranslate"><span class="pre">Path</span></code> for manipulating filenames, but more limited file information:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;URL    : </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;name   : </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;parent : </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">URL</span>    <span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.01</span><span class="o">.</span><span class="mi">01</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020001</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020006032951</span><span class="o">.</span><span class="n">hdf</span>
<span class="n">name</span>   <span class="p">:</span> <span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020001</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020006032951</span><span class="o">.</span><span class="n">hdf</span>
<span class="n">parent</span> <span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.01</span><span class="o">.</span><span class="mi">01</span>
</pre></div>
</div>
<p>but also some other helpful ones on the URL:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;anchor   : </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">anchor</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;hostname : </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">hostinfo</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;scheme   : </span><span class="si">{</span><span class="n">url</span><span class="o">.</span><span class="n">scheme</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">anchor</span>   <span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span>
<span class="n">hostname</span> <span class="p">:</span> <span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span>
<span class="n">scheme</span>   <span class="p">:</span> <span class="n">https</span>
</pre></div>
</div>
<div class="section" id="exercise-4">
<h4>Exercise 4<a class="headerlink" href="#exercise-4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>create a <code class="docutils literal notranslate"><span class="pre">URL</span></code> object for the file <code class="docutils literal notranslate"><span class="pre">table.html</span></code> in the directory <code class="docutils literal notranslate"><span class="pre">psd/enso/mei/</span></code> on the site <code class="docutils literal notranslate"><span class="pre">http://www.esrl.noaa.gov/</span></code>.</p></li>
<li><p>print out the url and check it is <code class="docutils literal notranslate"><span class="pre">table.html</span></code></p></li>
</ul>
<p>For accessing URLs, will mostly make use of the following functions in <code class="docutils literal notranslate"><span class="pre">URL</span></code> that you will see are very similar to those for <code class="docutils literal notranslate"><span class="pre">Path</span></code>:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>function</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URL.name</code></td>
<td>filename</td>
</tr>
<tr>
<td><code>URL.parent</code></td>
<td>parent</td>
</tr>
<tr>
<td><code>URL.parts</code></td>
<td>parts</td>
</tr>
<tr>
<td><code>URL.stat()</code></td>
<td>return info about the file. N.B. Only <code>URL.stat().st_size</code> is used for remote files</td>
</tr>
<tr>
<td><code>URL.glob(pattern)</code></td>
<td>Glob the pattern given in the URL directory, yielding matching files of any kind</td>
</tr>
<tr>
<td><code>URL.exists()</code></td>
<td>test to see if a url is accessible</td>
</tr>
</tbody>
</table><p>### login and password</p>
<p>Some web resources require you to use a login and password. This can be specified for the <code class="docutils literal notranslate"><span class="pre">URL</span></code> class by with the functiuon <code class="docutils literal notranslate"><span class="pre">URL.with_userinfo</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">URL</span><span class="o">.</span><span class="n">with_userinfo</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">with_userinfo</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">urlpath</span><span class="p">:</span>

<span class="n">with_userinfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
    <span class="n">Return</span> <span class="n">a</span> <span class="n">new</span> <span class="n">url</span> <span class="k">with</span> <span class="n">the</span> <span class="n">userinfo</span> <span class="n">changed</span><span class="o">.</span>
</pre></div>
</div>
<p>This is the main way you can pass your username and password to the relevant functions. However, in any public information (like these notebooks) we do not want to expose sensitive information such as usernames and passwords.</p>
<p>To that end <code class="docutils literal notranslate"><span class="pre">URL</span></code> can make use of stored passwords and usernames using the local <a class="reference external" href="geog0111/cylog.py">cylog</a> package that was covered in <a class="reference internal" href="004_Accounts.html"><span class="doc">004_Accounts</span></a>. You should have already tested that your NASA Earthdata login works for files on the site <code class="docutils literal notranslate"><span class="pre">https://e4ftl01.cr.usgs.gov</span></code>.</p>
</div>
</div>
<div class="section" id="exists">
<h3><code class="docutils literal notranslate"><span class="pre">exists</span></code><a class="headerlink" href="#exists" title="Permalink to this headline">¶</a></h3>
<p>We can use the function <code class="docutils literal notranslate"><span class="pre">URL.exists()</span></code> to test to see if some URL is accessible to us. The function first tries without a password, but if that fails, tries to find an appropriate password and username in the <code class="docutils literal notranslate"><span class="pre">cyclog</span></code> database.</p>
<p>Several of the URL functions have <code class="docutils literal notranslate"><span class="pre">verbose</span></code> options (unlike those from <code class="docutils literal notranslate"><span class="pre">Path</span></code>). This is to allow the user to gain more insight into what is going on in accessing the URL. We will use <code class="docutils literal notranslate"><span class="pre">exists()</span></code> with <code class="docutils literal notranslate"><span class="pre">verbose=True</span></code> below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">geog0111.gurlpath</span> <span class="kn">import</span> <span class="n">URL</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="n">site_dir</span> <span class="o">=</span> <span class="s1">&#39;/MOLA/MYD11_L2.006/2002.07.04&#39;</span>
<span class="n">site_file</span> <span class="o">=</span> <span class="s1">&#39;MYD11_L2.A2002185.0325.006.2015142192613.hdf&#39;</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">site_dir</span><span class="p">,</span><span class="n">site_file</span><span class="p">)</span>
<span class="k">if</span> <span class="n">url</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;I can access </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;I cannot access </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--&gt;</span> <span class="n">testing</span> <span class="n">to</span> <span class="n">see</span> <span class="k">if</span> <span class="n">we</span> <span class="n">are</span> <span class="n">a</span> <span class="n">local</span> <span class="n">file</span>
<span class="o">--&gt;</span> <span class="n">we</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">file</span> <span class="o">...</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOLA</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2002.07</span><span class="o">.</span><span class="mi">04</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="n">A2002185</span><span class="o">.</span><span class="mf">0325.006</span><span class="o">.</span><span class="mf">2015142192613.</span><span class="n">hdf</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">get</span>
<span class="o">--&gt;</span> <span class="n">testing</span> <span class="n">to</span> <span class="n">see</span> <span class="k">if</span> <span class="n">we</span> <span class="n">are</span> <span class="n">a</span> <span class="n">local</span> <span class="n">file</span>
<span class="o">--&gt;</span> <span class="n">we</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">file</span> <span class="o">...</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOLA</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2002.07</span><span class="o">.</span><span class="mi">04</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="n">A2002185</span><span class="o">.</span><span class="mf">0325.006</span><span class="o">.</span><span class="mf">2015142192613.</span><span class="n">hdf</span>
<span class="o">--&gt;</span> <span class="n">code</span> <span class="mi">401</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">another</span>
<span class="o">--&gt;</span> <span class="n">getting</span> <span class="n">login</span>
<span class="o">--&gt;</span> <span class="n">logging</span> <span class="ow">in</span> <span class="n">to</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span>


<span class="n">I</span> <span class="n">can</span> <span class="n">access</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOLA</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2002.07</span><span class="o">.</span><span class="mi">04</span><span class="o">/</span><span class="n">MYD11_L2</span><span class="o">.</span><span class="n">A2002185</span><span class="o">.</span><span class="mf">0325.006</span><span class="o">.</span><span class="mf">2015142192613.</span><span class="n">hdf</span>


<span class="o">--&gt;</span> <span class="n">data</span> <span class="n">read</span> <span class="kn">from</span> <span class="nn">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span>
<span class="o">--&gt;</span> <span class="n">code</span> <span class="mi">200</span>
</pre></div>
</div>
<p>When we try to access a datafile on the site <a class="reference external" href="https://e4ftl01.cr.usgs.gov"><code class="docutils literal notranslate"><span class="pre">https://e4ftl01.cr.usgs.gov</span></code></a> we need to use our NASA Earthdata login and password. This is done automatically withing the call to <code class="docutils literal notranslate"><span class="pre">url.exists()</span></code> or for any function requiring passwords.</p>
</div>
<div class="section" id="glob-and-nasa-datasets">
<h3><code class="docutils literal notranslate"><span class="pre">glob</span></code> and NASA datasets<a class="headerlink" href="#glob-and-nasa-datasets" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">glob</span></code> function is particularly useful for finding datasets on websites, as we might not always know the full file specification. Using <code class="docutils literal notranslate"><span class="pre">rglob()</span></code> (recursive glob) on a website is generally too slow to be worthwhile, so we will avoid using it.</p>
<p>Suppose we want to access some NASA hdf files for the product <code class="docutils literal notranslate"><span class="pre">MCD15A3H</span></code> for the data tile <code class="docutils literal notranslate"><span class="pre">h08v06</span></code>. On the site <code class="docutils literal notranslate"><span class="pre">https://e4ftl01.cr.usgs.gov</span></code> the data will be in the folder <code class="docutils literal notranslate"><span class="pre">'MOTA/MCD15A3H.006</span></code>. Data for a particular date then are in a directory of the form <code class="docutils literal notranslate"><span class="pre">/{year}.{month}.{day}/</span></code> where <code class="docutils literal notranslate"><span class="pre">month</span></code> and <code class="docutils literal notranslate"><span class="pre">day</span></code> must be a 2-digit string, left zero-padded (e.g. <code class="docutils literal notranslate"><span class="pre">02</span></code> instead of <code class="docutils literal notranslate"><span class="pre">2</span></code>). Files in there will have the form <code class="docutils literal notranslate"><span class="pre">*.h08v06*.hdf</span></code>. This is a perfect case for the use of <code class="docutils literal notranslate"><span class="pre">glob</span></code>:</p>
<p>If we specify a date (1-based for month, so <code class="docutils literal notranslate"><span class="pre">1</span></code> is January):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="s1">&#39;06&#39;</span><span class="p">,</span> <span class="s1">&#39;01&#39;</span>
</pre></div>
</div>
<p>then the directory will be given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">site_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;MOTA/MCD15A3H.006/</span><span class="si">{</span><span class="n">year</span><span class="si">:</span><span class="s1">4d</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">month</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">day</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>and the file, with wildcard <code class="docutils literal notranslate"><span class="pre">*</span></code> by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">site_file</span> <span class="o">=</span> <span class="s1">&#39;*.h08v06*.hdf&#39;</span>
</pre></div>
</div>
<p>we can use <code class="docutils literal notranslate"><span class="pre">glob</span></code> to discover the full URL specification:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">geog0111.gurlpath</span> <span class="kn">import</span> <span class="n">URL</span>

<span class="c1"># settings</span>
<span class="n">product</span> <span class="o">=</span> <span class="s1">&#39;MCD15A3H&#39;</span>
<span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="s1">&#39;06&#39;</span><span class="p">,</span> <span class="s1">&#39;01&#39;</span>
<span class="n">tile</span> <span class="o">=</span> <span class="s1">&#39;h08v06&#39;</span>

<span class="c1"># url with wildcards</span>
<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="n">site_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;MOTA/</span><span class="si">{</span><span class="n">product</span><span class="si">}</span><span class="s1">.006/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">day</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="n">site_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;*.</span><span class="si">{</span><span class="n">tile</span><span class="si">}</span><span class="s1">*.hdf&#39;</span>

<span class="c1"># get the information</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">site_dir</span><span class="p">)</span>\
<span class="c1"># convert generator to list to make it easier to understand</span>
<span class="n">hdf_urls</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">site_file</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">hdf_urls</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--&gt;</span> <span class="n">wildcards</span> <span class="ow">in</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;*.h08v06*.hdf&#39;</span><span class="p">]</span>
<span class="o">--&gt;</span> <span class="n">level</span> <span class="mi">0</span><span class="o">/</span><span class="mi">1</span> <span class="p">:</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.06</span><span class="o">.</span><span class="mi">01</span>


<span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.06</span><span class="o">.</span><span class="mi">01</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020153</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020160231732</span><span class="o">.</span><span class="n">hdf</span>


<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.06</span><span class="o">.</span><span class="mi">01</span>
</pre></div>
</div>
<p>This is extremely useful for dataset discovery.</p>
<div class="section" id="exercise-5">
<h4>Exercise 5<a class="headerlink" href="#exercise-5" title="Permalink to this headline">¶</a></h4>
<p>based on the code from above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># settings</span>
<span class="n">product</span> <span class="o">=</span> <span class="s1">&#39;MCD15A3H&#39;</span>
<span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="s1">&#39;2020&#39;</span><span class="p">,</span> <span class="s1">&#39;06&#39;</span><span class="p">,</span> <span class="s1">&#39;01&#39;</span>
<span class="n">tile</span> <span class="o">=</span> <span class="s1">&#39;h08v06&#39;</span>

<span class="c1"># url with wildcards</span>
<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="n">site_dir</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;MOTA/</span><span class="si">{</span><span class="n">product</span><span class="si">}</span><span class="s1">.006/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">day</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="n">site_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;*.</span><span class="si">{</span><span class="n">tile</span><span class="si">}</span><span class="s1">*.hdf&#39;</span>

<span class="c1"># get the information</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">site_dir</span><span class="p">)</span>
<span class="n">hdf_urls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">site_file</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>write a function called <code class="docutils literal notranslate"><span class="pre">modis_dataset</span></code> with arguments corresponding to the settings above</p></li>
<li><p>the function should return the URL objects of the NASA datasets specified by your arguments</p></li>
<li><p>your function should be fully documented and include some error checks</p></li>
<li><p>run a test of your function, and print the file size in MB for the file pointed to in the URL to 2 decimal places</p></li>
<li><p>what happens if you use a wildcard for the date?</p></li>
</ul>
<p>The utility function <code class="docutils literal notranslate"><span class="pre">modis_dataset</span></code> we have developed here is available as <code class="docutils literal notranslate"><span class="pre">get_url</span></code> in the <code class="docutils literal notranslate"><span class="pre">Modis</span></code> class in  <code class="docutils literal notranslate"><span class="pre">geog0111.modis</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span>  <span class="nn">geog0111.modis</span> <span class="kn">import</span> <span class="n">Modis</span>

<span class="n">help</span><span class="p">(</span><span class="n">Modis</span><span class="o">.</span><span class="n">get_url</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Help</span> <span class="n">on</span> <span class="n">function</span> <span class="n">get_url</span> <span class="ow">in</span> <span class="n">module</span> <span class="n">geog0111</span><span class="o">.</span><span class="n">modis</span><span class="p">:</span>

<span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">Get</span> <span class="n">URL</span> <span class="nb">object</span> <span class="nb">list</span> <span class="k">for</span> <span class="n">NASA</span> <span class="n">MODIS</span> <span class="n">products</span>
    <span class="k">for</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">product</span><span class="p">,</span> <span class="n">tile</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span>
    
    <span class="n">Keyword</span> <span class="n">Arguments</span><span class="p">:</span>
    
    <span class="n">verbose</span><span class="p">:</span>  <span class="nb">bool</span>
    <span class="n">site</span>    <span class="p">:</span> <span class="nb">str</span> 
    <span class="n">product</span> <span class="p">:</span> <span class="nb">str</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="s1">&#39;MCD15A3H&#39;</span>
    <span class="n">tile</span>    <span class="p">:</span> <span class="nb">str</span> <span class="n">e</span><span class="o">.</span><span class="n">g</span><span class="o">.</span> <span class="s1">&#39;h08v06&#39;</span>
    <span class="n">year</span>    <span class="p">:</span> <span class="nb">str</span> <span class="n">valid</span> <span class="mi">2000</span><span class="o">-</span><span class="n">present</span>
    <span class="n">month</span>   <span class="p">:</span> <span class="nb">str</span> <span class="mi">01</span><span class="o">-</span><span class="mi">12</span>
    <span class="n">day</span>     <span class="p">:</span> <span class="nb">str</span> <span class="mi">01</span><span class="o">-</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span>  <span class="nn">geog0111.modis</span> <span class="kn">import</span> <span class="n">Modis</span>

<span class="n">modis</span> <span class="o">=</span> <span class="n">Modis</span><span class="p">(</span><span class="s1">&#39;MCD15A3H&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">hdf_urls</span> <span class="o">=</span> <span class="n">modis</span><span class="o">.</span><span class="n">get_url</span><span class="p">(</span><span class="s2">&quot;2020&quot;</span><span class="p">,</span><span class="s2">&quot;*&quot;</span><span class="p">,</span><span class="s2">&quot;0[1-4]&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">hdf_urls</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> : </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--&gt;</span> <span class="n">wildcards</span> <span class="ow">in</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2020.*.0[1-4]&#39;</span> <span class="s1">&#39;*.h08v06*.hdf&#39;</span><span class="p">]</span>
<span class="o">--&gt;</span> <span class="n">level</span> <span class="mi">0</span><span class="o">/</span><span class="mi">2</span> <span class="p">:</span> <span class="mf">2020.</span><span class="o">*.</span><span class="mi">0</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">9</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="mf">2020.</span><span class="o">*.</span><span class="mi">0</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span>
<span class="o">--&gt;</span> <span class="n">level</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span> <span class="p">:</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.01</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.01</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.02</span><span class="o">.</span><span class="mi">02</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.02</span><span class="o">.</span><span class="mi">02</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.03</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.03</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.04</span><span class="o">.</span><span class="mi">02</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.04</span><span class="o">.</span><span class="mi">02</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.05</span><span class="o">.</span><span class="mi">04</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.05</span><span class="o">.</span><span class="mi">04</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.06</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.06</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.07</span><span class="o">.</span><span class="mi">03</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.07</span><span class="o">.</span><span class="mi">03</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.08</span><span class="o">.</span><span class="mi">04</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.08</span><span class="o">.</span><span class="mi">04</span>
<span class="o">--&gt;</span> <span class="n">trying</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.09</span><span class="o">.</span><span class="mi">01</span>
<span class="o">--&gt;</span> <span class="n">discovered</span> <span class="mi">1</span> <span class="n">files</span> <span class="k">with</span> <span class="n">pattern</span> <span class="o">*.</span><span class="n">h08v06</span><span class="o">*.</span><span class="n">hdf</span> <span class="ow">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">MOTA</span><span class="o">/</span><span class="n">MCD15A3H</span><span class="o">.</span><span class="mi">006</span><span class="o">/</span><span class="mf">2020.09</span><span class="o">.</span><span class="mi">01</span>


<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020001</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020006032951</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020033</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020038231141</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020061</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020066032716</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020093</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020099025238</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020125</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020130031836</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020153</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020160231732</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020185</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020190031222</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020217</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020223212414</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
<span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2020245</span><span class="o">.</span><span class="n">h08v06</span><span class="o">.</span><span class="mf">006.2020253152835</span><span class="o">.</span><span class="n">hdf</span> <span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this section, we have considered URLs and filenames in some detail, and made use of functions from <a class="reference external" href="https://docs.python.org/3/library/pathlib.html"><code class="docutils literal notranslate"><span class="pre">pathlib</span></code></a> and <a class="reference external" href="geog0111/gurlpath.py">gurlpath</a> to access them. These high-level routines will work for a large number of cases. If you need to go deeper into calls to URLs, you should look at the Python packages: <a class="reference external" href="https://docs.python.org/3.7/library/urllib.parse.html">urllib.parse</a>, <a class="reference external" href="https://requests.readthedocs.io/en/master/">requests</a> and <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a>.</p>
<p>The first batch of <code class="docutils literal notranslate"><span class="pre">Path</span></code> commands we saw had much commonality with the core <code class="docutils literal notranslate"><span class="pre">unix</span></code> commands we had previously come across for moving around the file system and finding file information:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>command</th>
<th>unix-equivalent</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Path.cwd()</code></td>
<td><code>pwd</code></td>
<td>Return path object representing the current working directory</td>
</tr>
<tr>
<td><code>Path.home()</code></td>
<td><code>~</code></td>
<td>Return path object representing the home directory</td>
</tr>
<tr>
<td><code>Path.stat()</code></td>
<td><code>ls -l</code>*</td>
<td>return info about the path. File size is <code>Path.stat().st_size</code></td>
</tr>
<tr>
<td><code>Path.chmod()</code></td>
<td><code>chmod</code></td>
<td>change file mode and permissions</td>
</tr>
<tr>
<td><code>Path.mkdir()</code></td>
<td><code>mkdir</code></td>
<td>to create a new directory at the given path</td>
</tr>
<tr>
<td><code>Path.rename()</code></td>
<td><code>mv</code></td>
<td>Rename a file or directory to the given target</td>
</tr>
<tr>
<td><code>Path.rmdir()</code></td>
<td><code>rmdir</code></td>
<td>Remove the empty directory</td>
</tr>
<tr>
<td><code>Path.unlink()</code></td>
<td><code>rm</code></td>
<td>Remove the file or symbolic link</td>
</tr>
</tbody>
</table><p>The second set is common to both <code class="docutils literal notranslate"><span class="pre">Path</span></code> and <code class="docutils literal notranslate"><span class="pre">URL</span></code>, and involves queries on the <code class="docutils literal notranslate"><span class="pre">Path</span></code> (<code class="docutils literal notranslate"><span class="pre">URL</span></code>) name, testing for file existence, and using wildcards to access a list of files matching a pattern:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>function</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Path.name</code></td>
<td>filename</td>
</tr>
<tr>
<td><code>Path.parent</code></td>
<td>parent</td>
</tr>
<tr>
<td><code>Path.parts</code></td>
<td>parts</td>
</tr>
<tr>
<td><code>Path.stat()</code></td>
<td>return info about the path</td>
</tr>
<tr>
<td><code>Path.glob(pattern)</code></td>
<td>Glob the pattern given in the URL directory, yielding matching files of any kind</td>
</tr>
<tr>
<td><code>Path.exists()</code></td>
<td>test to see if a url is accessible</td>
</tr>
</tbody>
</table><table border="1" class="docutils">
<thead>
<tr>
<th>function</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>URL.name</code></td>
<td>filename</td>
</tr>
<tr>
<td><code>URL.parent</code></td>
<td>parent</td>
</tr>
<tr>
<td><code>URL.parts</code></td>
<td>parts</td>
</tr>
<tr>
<td><code>URL.stat()</code></td>
<td>return info about the file. N.B. Only <code>URL.stat().st_size</code> is used for remote files</td>
</tr>
<tr>
<td><code>URL.glob(pattern)</code></td>
<td>Glob the pattern given in the URL directory, yielding matching files of any kind</td>
</tr>
<tr>
<td><code>URL.exists()</code></td>
<td>test to see if a url is accessible</td>
</tr>
</tbody>
</table></div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">GEOG0111 Scientific Computing</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="docindex.html">GEOG0111</a></li>
<li class="toctree-l1"><a class="reference internal" href="docindex.html#geog0111-scientific-computing">GEOG0111 Scientific Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="001_Notebook_use.html">001 Use of Jupyter notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="002_Unix.html">002 Some basic UNIX</a></li>
<li class="toctree-l1"><a class="reference internal" href="003_Help.html">003 Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="004_Accounts.html">004 Setup, Accounts and logins</a></li>
<li class="toctree-l1"><a class="reference internal" href="005_Packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="001_Notebook_use_answers.html">001 Use of Jupyter notebooks : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="002_Unix_answers.html">002 Some basic UNIX : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="003_Help_answers.html">003 Help : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="010_Python_Introduction.html">010 Introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="011_Python_data_types.html">011 Python data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="012_Python_strings.html">012 String formatting</a></li>
<li class="toctree-l1"><a class="reference internal" href="013_Python_string_methods.html">013 String methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="014_Python_groups.html">014 Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="015_Python_control.html">015 Control in Python: <code class="docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="016_Python_for.html">016 More control in Python: <code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="017_Functions.html">Functions in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="018_Running_Python.html">019 Python codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="010_Python_Introduction_answers.html">010 Introduction to Python : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="011_Python_data_types_answers.html">011 Python data types : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="012_Python_strings_answers.html">012 String formatting : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="013_Python_string_methods_answers.html">013 String methods : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="014_Python_groups_answers.html">014 Groups : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="015_Python_control_answers.html">015 Control in Python: <code class="docutils literal notranslate"><span class="pre">if</span></code> : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="016_Python_for_answers.html">016 More control in Python: <code class="docutils literal notranslate"><span class="pre">for</span></code> : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="017_Functions_answers.html">Functions in Python : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="018_Running_Python_answers.html">019 Python codes : Answers to exercises</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">020 Files and other Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="021_Read_text_files.html">021 Read and Write: Streams</a></li>
<li class="toctree-l1"><a class="reference internal" href="022_Read_write_files.html">021 Read and Write: URLs and files</a></li>
<li class="toctree-l1"><a class="reference internal" href="023_Pandas_and_plotting.html"><code class="docutils literal notranslate"><span class="pre">pandas</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="024_NASA_MODIS_Earthdata.html">NASA MODIS Earthdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="024_NASA_MODIS_Earthdata.html#exercises">Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="024_NASA_MODIS_Earthdata.html#summary">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="025_GoogleEarthEngine.html">201 Google Earth Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="026_Numpy_matplotlib.html">Manipulating data: <code class="docutils literal notranslate"><span class="pre">numpy</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="020_Python_files_answers.html">020 Files and other Resources : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="021_Read_text_files_answers.html">021 Read and Write: Streams : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="022_Read_write_files_answers.html">021 Read and Write: URLs and files : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="024_NASA_MODIS_Earthdata_answers.html">NASA MODIS Earthdata : Answers to exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="030_GDAL.html">3 Geospatial processing with <code class="docutils literal notranslate"><span class="pre">gdal</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="031_MODIS_download.html">3.2 Accessing MODIS Data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="032_GDAL_stacking_and_interpolating.html">3.4 Stacking and interpolating data</a></li>
<li class="toctree-l1"><a class="reference internal" href="033_GDAL_masking.html">3.3 GDAL, and OGR masking</a></li>
<li class="toctree-l1"><a class="reference internal" href="034_GDAL_Reconciling_projections.html">3.6 Reconciling projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="040_Linear_models.html">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="040_Linear_models.html#fitting-to-the-mauna-loa-co-2-record">Fitting to the Mauna Loa $CO_2$ record</a></li>
<li class="toctree-l1"><a class="reference internal" href="041_Modelling_and_optimisation.html">5 Modelling and optimisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEV_Local_Install.html">003 Full native installation  of software and notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEV_scripts.html">Scripts</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="018_Running_Python_answers.html" title="previous chapter">019 Python codes : Answers to exercises</a></li>
      <li>Next: <a href="021_Read_text_files.html" title="next chapter">021 Read and Write: Streams</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, P. Lewis and J. Gomez-Dans.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/020_Python_files.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>