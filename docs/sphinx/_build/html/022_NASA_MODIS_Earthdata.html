
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NASA MODIS Earthdata &#8212; GEOG0111 Scientific Computing 1.0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="nasa-modis-earthdata">
<h1>NASA MODIS Earthdata<a class="headerlink" href="#nasa-modis-earthdata" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<div class="section" id="purpose">
<h3>Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h3>
<p>In this notebook, we will use high-level codes from <code class="docutils literal notranslate"><span class="pre">geog0111</span></code> to familiarise ourselves with downloading and interpreting NASA MODIS datasets from <a class="reference external" href="https://urs.earthdata.nasa.gov"><code class="docutils literal notranslate"><span class="pre">NASA</span> <span class="pre">EarthData</span></code></a>. We will also be visualising these data in this notebook.</p>
<p>We will be <strong>introducing NASA MODIS land products</strong>, and viewing the MODIS LAI product as an example. This notebook should serve as an introduction to accessing similar products from Earthdata.</p>
<p>The aim of the codes here is not to provide an exhaustive interface to MODIS data products, although the same scripts should be useable for most, if not all similar products. Rather, it is to use these high-level codes to easily access and visualise the data to understand their properties.</p>
<p>Neither is it to develop or use an <a class="reference external" href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> to access the data. If all you want is to get hold of some data product for some defined location and time, then you might use an API such as <a class="reference external" href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>.</p>
<p>Students who take the <a class="reference external" href="https://github.com/UCL-EO/geog0111">GEOG0111 course</a> will develop codes along similar lines to this later in the term, so for them, these notes also illustrate some of the things they will be able to do when you have finished this course. For them, we will <em>look under the bonnet</em> of such codes, and learn how to develop them. For others, they can use these codes as they stand to access MODIS data via Earthdata.</p>
</div>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>Before you can use the material in this notebook, you will need to register as a user at the <a class="reference external" href="https://urs.earthdata.nasa.gov/users/new"><code class="docutils literal notranslate"><span class="pre">NASA</span> <span class="pre">EarthData</span></code></a>.</p>
<p>Once you have done that, make sure you know your <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> ready for below.</p>
<p>The are no assumptions that you know any python code at this point: the use of code should be high enough level that you can easily understand what is going on, and use the constructs shown to modify the codes to your purpose.</p>
<p>For completeness, we list the python and other codes below.</p>
<p>We do assume that you have basic familiarity with using <a class="reference internal" href="001_Notebook_use.html"><span class="doc">Jupyter notebooks</span></a>.</p>
<p>You should run through the <a class="reference external" href="#Credentials">Credentials</a> section below before proceeding further with these notes.</p>
</div>
<div class="section" id="credentials">
<h3>Credentials<a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h3>
<p>We will store your credentials for [<code class="docutils literal notranslate"><span class="pre">NASA</span> <span class="pre">EarthData</span></code>] (https://urs.earthdata.nasa.gov/users/new) to allow easier data downloading.</p>
<p><strong>N.B. using <code class="docutils literal notranslate"><span class="pre">cylog().login()</span></code> is only intended to work with access to NASA Earthdata and to prevent you having to expose your username and password in these notes</strong>.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">geog0111</span></code> library, we have a Python class called <code class="docutils literal notranslate"><span class="pre">cylog</span></code>, written to allow easier persistent interface to NASA download servers.</p>
<p>First, we import <code class="docutils literal notranslate"><span class="pre">cylog</span></code> from the <code class="docutils literal notranslate"><span class="pre">geog0111</span></code> library.</p>
<p>Run the cell below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">geog0111.cylog</span> <span class="kn">import</span> <span class="n">Cylog</span>
    <span class="kn">from</span> <span class="nn">geog0111.nasa_requests</span> <span class="kn">import</span> <span class="n">test</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;Error loading the required uclgeog library&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If this gave an error, there is a problem importing the <code class="docutils literal notranslate"><span class="pre">geog0111</span></code> library and you should get help on this in a support class.</p>
</div>
<div class="section" id="earthdata-login">
<h3>Earthdata login<a class="headerlink" href="#earthdata-login" title="Permalink to this headline">¶</a></h3>
<p>Run the cell below, and enter your <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code> if prompted.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="n">cy</span> <span class="o">=</span> <span class="n">Cylog</span><span class="p">(</span><span class="n">site</span><span class="p">,</span><span class="n">init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># check this has worked</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;has this worked?&#39;</span><span class="p">,</span><span class="n">test</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>None
has this worked? True


--&gt; generating key file in /Users/plewis/.cylog
--&gt; --&gt; saving key file to /Users/plewis/.cylog/.cylog.npz
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">site</span><span class="o">=</span><span class="s1">&#39;https://e4ftl01.cr.usgs.gov&#39;</span>
<span class="c1"># uncomment this line to force re-entry</span>
<span class="c1">#done=cy.login(force=True)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--&gt;</span> <span class="n">forcing</span> <span class="n">re</span><span class="o">-</span><span class="n">entry</span> <span class="n">of</span> <span class="n">password</span> <span class="k">for</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span>


<span class="o">--&gt;</span> <span class="n">user</span> <span class="n">login</span> <span class="n">required</span> <span class="k">for</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">e4ftl01</span><span class="o">.</span><span class="n">cr</span><span class="o">.</span><span class="n">usgs</span><span class="o">.</span><span class="n">gov</span> <span class="o">&lt;--</span>
<span class="n">Enter</span> <span class="n">your</span> <span class="n">username</span><span class="p">:</span> <span class="n">lewis0585</span>
<span class="n">please</span> <span class="nb">type</span> <span class="n">your</span> <span class="n">password········</span>
<span class="n">please</span> <span class="n">re</span><span class="o">-</span><span class="nb">type</span> <span class="n">your</span> <span class="n">password</span> <span class="k">for</span> <span class="n">confirmation········</span>
<span class="n">password</span> <span class="n">created</span>


<span class="o">--&gt;</span> <span class="n">ciphering</span> <span class="n">key</span> <span class="kn">from</span> <span class="nn">key</span> <span class="n">file</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">plewis</span><span class="o">/.</span><span class="n">cylog</span><span class="o">/.</span><span class="n">cylog</span><span class="o">.</span><span class="n">npz</span>
<span class="o">--&gt;</span> <span class="o">--&gt;</span> <span class="n">writing</span> <span class="n">ciphers</span> <span class="n">to</span> <span class="n">file</span>
<span class="o">--&gt;</span> <span class="o">--&gt;</span> <span class="n">done</span> <span class="n">writing</span> <span class="n">ciphers</span> <span class="n">to</span> <span class="n">file</span>
</pre></div>
</div>
<p>If you want to force the code to let you re-enter your credentials (e.g. you got it wrong before, or have changed them, or the test fails), then change the call to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cy</span> <span class="o">=</span> <span class="n">cylog</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>and re-run.</p>
<p><code class="docutils literal notranslate"><span class="pre">cylog</span></code> stores your username and password in a file that only you can read. We can use this as a convenient way to pull some NASA MODIS data.</p>
</div>
<div class="section" id="code-used">
<h3>Code used<a class="headerlink" href="#code-used" title="Permalink to this headline">¶</a></h3>
<p>In the code below, we use the following python constructs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3schools.com/python/python_modules.asp"><code class="docutils literal notranslate"><span class="pre">import</span></code> modules</a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/python_try_except.asp#:~:text=The%20try%20block%20lets%20you,the%20try%2D%20and%20except%20blocks.">Error trapping: <code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">...</span> <span class="pre">except</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/ref_keyword_assert.asp"><code class="docutils literal notranslate"><span class="pre">assert</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/python_dictionaries.asp"><code class="docutils literal notranslate"><span class="pre">dictionary</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/ref_func_print.asp"><code class="docutils literal notranslate"><span class="pre">print()</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/ref_string_format.asp">string <code class="docutils literal notranslate"><span class="pre">format()</span></code></a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/python_variables.asp">variables</a></p></li>
<li><p><a class="reference external" href="https://www.w3schools.com/python/gloss_python_function_keyword_arguments.asp">keyword arguments</a></p></li>
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.logical_or.html">np.logical_or</a></p></li>
</ul>
<p>Their meaning should be quite obvious from their context, but we provide links here to materiual at <a class="reference external" href="https://www.w3schools.com/">https://www.w3schools.com/</a> should you wish to understand them further here.</p>
</div>
</div>
<div class="section" id="modis-lai-product">
<h2>MODIS LAI product<a class="headerlink" href="#modis-lai-product" title="Permalink to this headline">¶</a></h2>
<p>To introduce geospatial processing, we will use a dataset from the MODIS LAI product over the UK.</p>
<p>The data product <a class="reference external" href="https://modis.gsfc.nasa.gov/data/dataprod/mod15.php">MOD15</a> LAI/FPAR has been generated from NASA MODIS sensors Terra and Aqua data since 2002. We are now in dataset collection 6 (the data version to use).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LAI</span> <span class="ow">is</span> <span class="n">defined</span> <span class="k">as</span> <span class="n">the</span> <span class="n">one</span><span class="o">-</span><span class="n">sided</span> <span class="n">green</span> <span class="n">leaf</span> <span class="n">area</span> <span class="n">per</span> <span class="n">unit</span> <span class="n">ground</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">broadleaf</span> <span class="n">canopies</span> <span class="ow">and</span> <span class="k">as</span> <span class="n">half</span> <span class="n">the</span> <span class="n">total</span> <span class="n">needle</span> <span class="n">surface</span> <span class="n">area</span> <span class="n">per</span> <span class="n">unit</span> <span class="n">ground</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">coniferous</span> <span class="n">canopies</span><span class="o">.</span> <span class="n">FPAR</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">fraction</span> <span class="n">of</span> <span class="n">photosynthetically</span> <span class="n">active</span> <span class="n">radiation</span> <span class="p">(</span><span class="mi">400</span><span class="o">-</span><span class="mi">700</span> <span class="n">nm</span><span class="p">)</span> <span class="n">absorbed</span> <span class="n">by</span> <span class="n">green</span> <span class="n">vegetation</span><span class="o">.</span> <span class="n">Both</span> <span class="n">variables</span> <span class="n">are</span> <span class="n">used</span> <span class="k">for</span> <span class="n">calculating</span> <span class="n">surface</span> <span class="n">photosynthesis</span><span class="p">,</span> <span class="n">evapotranspiration</span><span class="p">,</span> <span class="ow">and</span> <span class="n">net</span> <span class="n">primary</span> <span class="n">production</span><span class="p">,</span> <span class="n">which</span> <span class="ow">in</span> <span class="n">turn</span> <span class="n">are</span> <span class="n">used</span> <span class="n">to</span> <span class="n">calculate</span> <span class="n">terrestrial</span> <span class="n">energy</span><span class="p">,</span> <span class="n">carbon</span><span class="p">,</span> <span class="n">water</span> <span class="n">cycle</span> <span class="n">processes</span><span class="p">,</span> <span class="ow">and</span> <span class="n">biogeochemistry</span> <span class="n">of</span> <span class="n">vegetation</span><span class="o">.</span> <span class="n">Algorithm</span> <span class="n">refinements</span> <span class="n">have</span> <span class="n">improved</span> <span class="n">quality</span> <span class="n">of</span> <span class="n">retrievals</span> <span class="ow">and</span> <span class="n">consistency</span> <span class="k">with</span> <span class="n">field</span> <span class="n">measurements</span> <span class="n">over</span> <span class="nb">all</span> <span class="n">biomes</span><span class="p">,</span> <span class="k">with</span> <span class="n">a</span> <span class="n">focus</span> <span class="n">on</span> <span class="n">woody</span> <span class="n">vegetation</span><span class="o">.</span>
</pre></div>
</div>
<p>We use such data to map and understand about the dynamics of terrestrial vegetation / carbon, for example, for climate studies.</p>
<p>The raster data are arranged in tiles, indexed by row and column, to cover the globe:</p>
<p><img alt="MODIS tiles" src="https://www.researchgate.net/profile/J_Townshend/publication/220473201/figure/fig5/AS:277546596880390&#64;1443183673583/The-global-MODIS-Sinusoidal-tile-grid.png" /></p>
<div class="section" id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h3>
<p>The pattern on the tile names is <code class="docutils literal notranslate"><span class="pre">hXXvYY</span></code> where <code class="docutils literal notranslate"><span class="pre">XX</span></code> is the horizontal coordinate and <code class="docutils literal notranslate"><span class="pre">YY</span></code> the vertical.</p>
<ul class="simple">
<li><p>use the map above to work out the names of the two tiles that we will need to access data over the UK</p></li>
<li><p>set the variable <code class="docutils literal notranslate"><span class="pre">tiles</span></code> to contain these two names in a list</p></li>
</ul>
<p>For example, for the two tiles covering Madagascar, we would set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;h22v10&#39;</span><span class="p">,</span><span class="s1">&#39;h22v11&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-nasa-modis-urls">
<h3>Accessing NASA MODIS URLs<a class="headerlink" href="#accessing-nasa-modis-urls" title="Permalink to this headline">¶</a></h3>
<p><span class="burk"><strong>Warning: The NASA data servers tend to be down for maintainance on Wednesday morning EST</strong></span></p>
<p>Although you can access MODIS datasets through the <a class="reference external" href="https://urs.earthdata.nasa.gov/home">NASA Earthdata</a> interface, there are many occasions that we would want to just automatically pull datasets. As we note above, we could use some existing API for this, such as <a class="reference external" href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>, but we are aiming here at being able to ultimately develop codes that do this from a lower-level perspective.</p>
<p>Automation has many roles, and is particularly useful when you want a time series of data that might involve many files. For example, for analysing LAI or other variables over space/time) we will want to write code that pulls the time series of data.</p>
<p>If you visit the site <a class="reference external" href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006</a>, you will see ‘date’ style links (e.g. <code class="docutils literal notranslate"><span class="pre">2018.09.30</span></code>) through to sub-directories.</p>
<p>In these, e.g. <a class="reference external" href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> you will find URLs of a set of files.</p>
<p>The files pointed to by the URLs are the MODIS MOD15 4-day composite 500 m LAI/FPAR product <a class="reference external" href="https://lpdaac.usgs.gov/dataset_discovery/modis/modis_products_table/mcd15a3h_v006">MCD15A3H</a>.</p>
<p>There are links to several datasets on the page, including ‘quicklook files’ that are jpeg format images of the datasets, e.g.:</p>
<p><img alt="MCD15A3H.A2018273.h17v03" src="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/BROWSE.MCD15A3H.A2018273.h17v03.006.2018278143630.1.jpg" /></p>
<p>as well as <code class="docutils literal notranslate"><span class="pre">xml</span></code> files and <code class="docutils literal notranslate"><span class="pre">hdf</span></code> datasets.</p>
</div>
<div class="section" id="data-products">
<h3>Data Products<a class="headerlink" href="#data-products" title="Permalink to this headline">¶</a></h3>
<p>If we look at the dataserver we hae specified <a class="reference external" href="https://e4ftl01.cr.usgs.gov">https://e4ftl01.cr.usgs.gov</a>, we will see that a number of sub-directories exist. Each of these ‘server directories’ points to a different data stream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">ASTT</span><span class="o">/</span>                   <span class="mi">2019</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">05</span> <span class="mi">07</span><span class="p">:</span><span class="mi">54</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">COMMUNITY</span><span class="o">/</span>              <span class="mi">2020</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">02</span> <span class="mi">08</span><span class="p">:</span><span class="mi">45</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">ECOSTRESS</span><span class="o">/</span>              <span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">09</span> <span class="mi">10</span><span class="p">:</span><span class="mi">30</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">GEDI</span><span class="o">/</span>                   <span class="mi">2020</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">10</span> <span class="mi">09</span><span class="p">:</span><span class="mi">58</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">MEASURES</span><span class="o">/</span>               <span class="mi">2020</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">17</span> <span class="mi">10</span><span class="p">:</span><span class="mi">55</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">MOLA</span><span class="o">/</span>                   <span class="mi">2020</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">01</span> <span class="mi">09</span><span class="p">:</span><span class="mi">20</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">MOLT</span><span class="o">/</span>                   <span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">14</span> <span class="mi">08</span><span class="p">:</span><span class="mi">06</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">MOTA</span><span class="o">/</span>                   <span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">27</span> <span class="mi">06</span><span class="p">:</span><span class="mi">49</span>    <span class="o">-</span>   
<span class="p">[</span><span class="n">DIR</span><span class="p">]</span> <span class="n">VIIRS</span><span class="o">/</span>                  <span class="mi">2020</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span> <span class="mi">10</span><span class="p">:</span><span class="mi">26</span>    <span class="o">-</span>   
</pre></div>
</div>
<p>For example, we might notice <a class="reference external" href="https://e4ftl01.cr.usgs.gov/VIIRS">VIIRS</a> which takes us to the <a class="reference external" href="https://viirsland.gsfc.nasa.gov">VIIRS data products</a>, or <a class="reference external" href="https://e4ftl01.cr.usgs.gov/GEDI">GEDI</a> <a class="reference external" href="https://gedi.umd.edu/">spaceborne lidar</a> data. Each of these data streams will have their own properties that we need to appreciate before using them.</p>
</div>
<div class="section" id="mota">
<h3>MOTA<a class="headerlink" href="#mota" title="Permalink to this headline">¶</a></h3>
<p>The URL we have used above, <a class="reference external" href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> starts with a call to the server directory <code class="docutils literal notranslate"><span class="pre">MOTA</span></code>, so we can think of <code class="docutils literal notranslate"><span class="pre">https://e4ftl01.cr.usgs.gov/MOTA</span></code> as the base level URL.</p>
<p>MOTA refers to combined MODIS Terra and Aqua datasets. Similarly, MOLA and MOLT refer to datasets generated from single MODIS sensors of Aqua and Terra, respectively.</p>
<p>The rest of the directory information <code class="docutils literal notranslate"><span class="pre">MCD15A3H.006/2018.09.30</span></code> tells us:</p>
<ul class="simple">
<li><p>the product name <code class="docutils literal notranslate"><span class="pre">MCD15A3H</span></code></p></li>
<li><p>the product version <code class="docutils literal notranslate"><span class="pre">006</span></code></p></li>
<li><p>the date of the dataset <code class="docutils literal notranslate"><span class="pre">2018.09.30</span></code></p></li>
</ul>
<p>There are several ways we could specify the date information. The most ‘human readable’ is probably <code class="docutils literal notranslate"><span class="pre">YYYY.MM.DD</span></code> as given here.</p>
</div>
<div class="section" id="modis-filename-format">
<h3>MODIS filename format<a class="headerlink" href="#modis-filename-format" title="Permalink to this headline">¶</a></h3>
<p>If we vist the link to a particular date for this dataset  <a class="reference external" href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a>, we see some files that have the suffix <code class="docutils literal notranslate"><span class="pre">hdf</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">hdf</span></code> filenames are of the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MCD15A3H</span><span class="o">.</span><span class="n">A2018273</span><span class="o">.</span><span class="n">h35v10</span><span class="o">.</span><span class="mf">006.2018278143650</span><span class="o">.</span><span class="n">hdf</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p>the first field (<code class="docutils literal notranslate"><span class="pre">MCD15A3H</span></code>) gives the product code</p></li>
<li><p>the second (<code class="docutils literal notranslate"><span class="pre">A2018273</span></code>) gives the observation date: day of year <code class="docutils literal notranslate"><span class="pre">273</span></code>, <code class="docutils literal notranslate"><span class="pre">2018</span></code> here</p></li>
<li><p>the third (<code class="docutils literal notranslate"><span class="pre">h35v10</span></code>) gives the ‘MODIS tile’ code for the data location</p></li>
<li><p>the remaining fields specify the product version number (<code class="docutils literal notranslate"><span class="pre">006</span></code>) and a code representing the processing date.</p></li>
</ul>
<p>If we look at the <a class="reference external" href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">product specification page</a> we see that the data product has multiple data layers. In the case of MCD15A3H, this is:</p>
<p>|SDS Name	|Description	| Units	|Data Type	|Fill Value|	No Data Value	|Valid Range|	Scale Factor
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|-|
| Fpar_500m |	Fraction of Photosynthetically Active Radiation	|Percent|	8-bit unsigned integer	|249 to 255	|N/A	|0 to 100	|0.01
|Lai_500m	|Leaf Area Index|	m²/m²|	8-bit unsigned integer|	249 to 255	|N/A|	0 to 100|	0.1|
|FparLai_QC	|Quality for  FPAR and LAI	|Class Flag	|8-bit unsigned integer	|255|	N/A	|0 to 254	|N/A
| FparExtra_QC	|Extra detail Quality for  FPAR and LAI	|Class Flag|	8-bit unsigned integer|	255	|N/A	|0 to 254	|N/A
|FparStdDev_500m|	Standard deviation of  FPAR	|Percent|	8-bit unsigned integer|	248 to 255	|N/A|	0 to 100	|0.01
|LaiStdDev_500m|	Standard deviation of LAI	|m²/m²|	8-bit unsigned integer|	248 to 255|	N/A	|0 to 100	|0.1</p>
</div>
</div>
<div class="section" id="getting-and-visualising-the-data">
<h2>Getting and visualising the data<a class="headerlink" href="#getting-and-visualising-the-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="grid">
<h3>Grid<a class="headerlink" href="#grid" title="Permalink to this headline">¶</a></h3>
<p>One thing we might need sometimes is to specify the <code class="docutils literal notranslate"><span class="pre">grid</span></code> used by the data product. Mostly, this is just the same as the product name (this is the default in our codes by just setting <code class="docutils literal notranslate"><span class="pre">grid</span></code> to the same as the product name).</p>
<p>For the product <code class="docutils literal notranslate"><span class="pre">MCD15A3H</span></code> that we use here though, the grid is <code class="docutils literal notranslate"><span class="pre">MOD_Grid_MCD15A3H</span></code>, so we need to specify this. This issue is something to look out for when you specify a MODIS product you haven’t use before. This is not specified in the product user guides or specifications, but you will <em>mostly</em> find it the associated <a class="reference external" href="https://ladsweb.modaps.eosdis.nasa.gov/filespec/MODIS/6/MCD15A3H">file specifications document</a>. When you use a new proiduct then, don’t forget to check the appropriate <a class="reference external" href="https://ladsweb.modaps.eosdis.nasa.gov/filespec/MODIS/6">file specifications</a> to find the grid object used!</p>
<p>If you can’t find it, just try to use the default (set <code class="docutils literal notranslate"><span class="pre">grid</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
<p>If that fails to return anything useful, the easiest thinbg to do is to examine the SDS datasets in the file itself.</p>
<p>For example, lets try using the default grid:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">uclgeog.process_timeseries</span> <span class="kn">import</span> <span class="n">mosaic</span><span class="p">,</span> <span class="n">visualise</span>
<span class="c1"># libraries we need</span>

<span class="c1">#######################</span>
<span class="c1"># specify what we want</span>
<span class="c1"># in a dictionary</span>
<span class="c1">#######################</span>
<span class="c1"># UK tiles</span>
<span class="c1"># specify day of year (DOY) and year</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tiles&#39;</span>   <span class="p">:</span>    <span class="p">[</span><span class="s1">&#39;h17v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h17v04&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v04&#39;</span><span class="p">],</span>
    <span class="s1">&#39;doy&#39;</span>     <span class="p">:</span>    <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;year&#39;</span>    <span class="p">:</span>    <span class="mi">2020</span><span class="p">,</span>
    <span class="s1">&#39;product&#39;</span> <span class="p">:</span>    <span class="s1">&#39;MCD15A3H&#39;</span><span class="p">,</span>
    <span class="s1">&#39;layer&#39;</span>   <span class="p">:</span>    <span class="s1">&#39;Lai_500m&#39;</span><span class="p">,</span>
    <span class="s1">&#39;grid&#39;</span>    <span class="p">:</span>    <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span>   <span class="s1">&#39;https://e4ftl01.cr.usgs.gov/MOTA&#39;</span>
<span class="p">}</span>

<span class="c1"># check to see if it worked</span>
<span class="c1"># and trap errors </span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">mosaic</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This hasn&#39;t worked&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This worked&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The code exits with the message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">failed</span> <span class="n">to</span> <span class="n">warp</span> <span class="p">[</span><span class="s1">&#39;HDF4_EOS:EOS_GRID:&quot;data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf&quot;:MCD15A3H:Lai_500m&#39;</span><span class="p">,</span> <span class="s1">&#39;HDF4_EOS:EOS_GRID:&quot;data/MCD15A3H.A2020001.h17v04.006.2020006031910.hdf&quot;:MCD15A3H:Lai_500m&#39;</span><span class="p">,</span> <span class="s1">&#39;HDF4_EOS:EOS_GRID:&quot;data/MCD15A3H.A2020001.h18v03.006.2020006033540.hdf&quot;:MCD15A3H:Lai_500m&#39;</span><span class="p">,</span> <span class="s1">&#39;HDF4_EOS:EOS_GRID:&quot;data/MCD15A3H.A2020001.h18v04.006.2020006032422.hdf&quot;:MCD15A3H:Lai_500m&#39;</span><span class="p">]</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;h17v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h17v04&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v04&#39;</span><span class="p">],</span> <span class="n">data</span><span class="o">/</span>
</pre></div>
</div>
<p>This is telling us that it has tried to access a dataset</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HDF4_EOS</span><span class="p">:</span><span class="n">EOS_GRID</span><span class="p">:</span><span class="s2">&quot;data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf&quot;</span><span class="p">:</span><span class="n">MCD15A3H</span><span class="p">:</span><span class="n">Lai_500m</span>
</pre></div>
</div>
<p>and this is where it has failed.</p>
<p>We could use python calls to check what this should be, but we mostly find it easier to use system tool, <code class="docutils literal notranslate"><span class="pre">gdalinfo</span></code> in this case. <a class="reference external" href="https://gdal.org/"><code class="docutils literal notranslate"><span class="pre">gdal</span></code></a> is software for geospatial processing that can deal with a wide range of formats. We will make a lot of use of it later on.</p>
<p>For now, we can run a system command below to see what the SDS <code class="docutils literal notranslate"><span class="pre">Lai_500m</span></code> looks like in one of the files it has downloaded (we get the filename from the list reported above).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>!gdalinfo data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf | grep Lai_500m
</pre></div>
</div>
<p>From this, we see that the dataset specification is really</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HDF4_EOS</span><span class="p">:</span><span class="n">EOS_GRID</span><span class="p">:</span><span class="s2">&quot;data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf&quot;</span><span class="p">:</span><span class="n">MOD_Grid_MCD15A3H</span><span class="p">:</span><span class="n">Lai_500m</span>
</pre></div>
</div>
<p>and not what we previously assumed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HDF4_EOS</span><span class="p">:</span><span class="n">EOS_GRID</span><span class="p">:</span><span class="s2">&quot;data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf&quot;</span><span class="p">:</span><span class="n">MCD15A3H</span><span class="p">:</span><span class="n">Lai_500m</span>
</pre></div>
</div>
<p>We have most of the specification correct, but have used <code class="docutils literal notranslate"><span class="pre">MCD15A3H:Lai_500m</span></code> instead of <code class="docutils literal notranslate"><span class="pre">MOD_Grid_MCD15A3H:Lai_500m</span></code>. Let’s fix this now:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">uclgeog.process_timeseries</span> <span class="kn">import</span> <span class="n">mosaic</span><span class="p">,</span> <span class="n">visualise</span>
<span class="c1"># libraries we need</span>

<span class="c1">#######################</span>
<span class="c1"># specify what we want</span>
<span class="c1"># in a dictionary</span>
<span class="c1">#######################</span>
<span class="c1"># UK tiles</span>
<span class="c1"># specify day of year (DOY) and year</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tiles&#39;</span>   <span class="p">:</span>    <span class="p">[</span><span class="s1">&#39;h17v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h17v04&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v04&#39;</span><span class="p">],</span>
    <span class="s1">&#39;doy&#39;</span>     <span class="p">:</span>    <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;year&#39;</span>    <span class="p">:</span>    <span class="mi">2020</span><span class="p">,</span>
    <span class="s1">&#39;product&#39;</span> <span class="p">:</span>    <span class="s1">&#39;MCD15A3H&#39;</span><span class="p">,</span>
    <span class="s1">&#39;layer&#39;</span>   <span class="p">:</span>    <span class="s1">&#39;Lai_500m&#39;</span><span class="p">,</span>
    <span class="s1">&#39;grid&#39;</span>    <span class="p">:</span>    <span class="s1">&#39;MOD_Grid_MCD15A3H&#39;</span><span class="p">,</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span>   <span class="s1">&#39;https://e4ftl01.cr.usgs.gov/MOTA&#39;</span>

<span class="p">}</span>

<span class="c1"># check to see if it worked</span>
<span class="c1"># and trap errors </span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">mosaic</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This hasn&#39;t worked&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This worked&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="download">
<h3>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h3>
<p>So, other than some terms (e.g. version number) we can take as defaults, when we want to access a MODIS product as tile data, we need to specify:</p>
<ul class="simple">
<li><p>product code</p></li>
<li><p>SDS Name (scientific dataset name)</p></li>
<li><p>tile(s)</p></li>
<li><p>day of year (DOY)</p></li>
<li><p>year</p></li>
</ul>
<p>Now we have some appreciation of the MODIS dataset description requirements, we can use the method <code class="docutils literal notranslate"><span class="pre">mosaic_and_clip()</span></code> in <code class="docutils literal notranslate"><span class="pre">uclgeog</span></code> to download some example datasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># UK tiles</span>
<span class="n">tiles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;h17v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h17v04&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v04&#39;</span><span class="p">]</span>
<span class="c1"># specify day of year (DOY) and year</span>
<span class="n">doy</span><span class="p">,</span><span class="n">year</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2020</span>
<span class="c1"># product</span>
<span class="n">product</span> <span class="o">=</span> <span class="s1">&#39;MCD15A3H&#39;</span>
<span class="c1"># SDS</span>
<span class="n">layer</span> <span class="o">=</span> <span class="s2">&quot;Lai_500m&quot;</span>
<span class="c1"># grid</span>
<span class="n">grid</span> <span class="o">=</span> <span class="s1">&#39;MOD_Grid_MCD15A3H&#39;</span>
</pre></div>
</div>
<p>One useful thing we have implemented in <code class="docutils literal notranslate"><span class="pre">mosaic_and_clip()</span></code> is to mosaic data from different tiles together into one contiguous dataset. So, although we will have data specified over four tiles, we will mosaic it together into a single array.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">uclgeog.process_timeseries</span> <span class="kn">import</span> <span class="n">mosaic_and_clip</span><span class="p">,</span> <span class="n">visualise</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># libraries we need</span>

<span class="c1">#######################</span>
<span class="c1"># specify what we want</span>
<span class="c1"># in a dictionary</span>
<span class="c1">#######################</span>
<span class="c1"># UK tiles</span>
<span class="c1"># specify day of year (DOY) and year</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tiles&#39;</span>   <span class="p">:</span>    <span class="p">[</span><span class="s1">&#39;h17v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h17v04&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v03&#39;</span><span class="p">,</span> <span class="s1">&#39;h18v04&#39;</span><span class="p">],</span>
    <span class="s1">&#39;doy&#39;</span>     <span class="p">:</span>    <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;year&#39;</span>    <span class="p">:</span>    <span class="mi">2020</span><span class="p">,</span>
    <span class="s1">&#39;product&#39;</span> <span class="p">:</span>    <span class="s1">&#39;MCD15A3H&#39;</span><span class="p">,</span>
    <span class="s1">&#39;layer&#39;</span>   <span class="p">:</span>    <span class="s1">&#39;Lai_500m&#39;</span><span class="p">,</span>
    <span class="s1">&#39;grid&#39;</span>    <span class="p">:</span>    <span class="s1">&#39;MOD_Grid_MCD15A3H&#39;</span><span class="p">,</span>
    <span class="s1">&#39;verbose&#39;</span> <span class="p">:</span>    <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span>   <span class="s1">&#39;https://e4ftl01.cr.usgs.gov/MOTA&#39;</span>
<span class="p">}</span>

<span class="c1">#######################</span>
<span class="c1"># download and interpret</span>
<span class="c1"># and mask non-valid numbers by setting to NaN</span>
<span class="c1"># see data table above</span>
<span class="c1">#######################</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">mosaic</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">This hasn&#39;t worked&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">248</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
    <span class="c1">#######################</span>
    <span class="c1"># print some feedback</span>
    <span class="c1">#######################</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;the variable lai contains a dataset of dimension </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;for product </span><span class="si">{product}</span><span class="s1"> SDS </span><span class="si">{layer}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;for day </span><span class="si">{doy}</span><span class="s1"> of year </span><span class="si">{year}</span><span class="s1"> for tiles </span><span class="si">{tiles}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="visualise">
<h3>Visualise<a class="headerlink" href="#visualise" title="Permalink to this headline">¶</a></h3>
<p>We have now generated a dataset, stored in a variable <code class="docutils literal notranslate"><span class="pre">lai</span></code>. We are likely to want to perform some analysis on this, but we might also like to visualise the dataset.</p>
<p>We can do this using a python package <a class="reference external" href="https://matplotlib.org">matplotlib</a> that we will gain more experience with later.</p>
<p>For now, we will simply implement a typical image visualisation, with a dataset title, and scale bar. We will use a method <code class="docutils literal notranslate"><span class="pre">visualise()</span></code> from our <code class="docutils literal notranslate"><span class="pre">uclgeog</span></code> library to do this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># call visualise</span>
<span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;product </span><span class="si">{product}</span><span class="s1"> SDS </span><span class="si">{layer}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span> <span class="o">+</span> \
        <span class="s1">&#39;for day </span><span class="si">{doy}</span><span class="s1"> of year </span><span class="si">{year}</span><span class="s1"> for tiles </span><span class="si">{tiles}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<span class="c1"># set the max value to 3.0 to be able to see whats going on</span>
<span class="n">plot</span><span class="o">=</span><span class="n">visualise</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercises">
<h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-change-the-year-and-doy">
<h2>Exercise: change the year and DOY<a class="headerlink" href="#exercise-change-the-year-and-doy" title="Permalink to this headline">¶</a></h2>
<p>Using the lines of code above, download and visualise the LAI dataset for a different DOY and year. Remember that it is a 4-day synthesis, so there are only datasets on doy 1,5,9, …</p>
<p>Put comments in your code using <code class="docutils literal notranslate"><span class="pre">#</span></code> to start a comment, to describe what you are doing.</p>
<p>You might want to set <code class="docutils literal notranslate"><span class="pre">verbose</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> to get some feedback on what is going on.</p>
</div>
<div class="section" id="exercise-change-the-location">
<h2>Exercise: change the location<a class="headerlink" href="#exercise-change-the-location" title="Permalink to this headline">¶</a></h2>
<p>Using the lines of code above, download and visualise the LAI dataset for a different location.</p>
<p>You will need to specify the tile or tiles that you wish to use.</p>
<p>As before, put comments in your code using <code class="docutils literal notranslate"><span class="pre">#</span></code> to start a comment, to describe what you are doing.</p>
<p>You might want to set <code class="docutils literal notranslate"><span class="pre">verbose</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> to get some feedback on what is going on.</p>
</div>
<div class="section" id="exercise-change-the-sds">
<h2>Exercise: change the SDS<a class="headerlink" href="#exercise-change-the-sds" title="Permalink to this headline">¶</a></h2>
<p>Using the lines of code above, download and visualise the LAI dataset for a different location.</p>
<p>Now, instead of using the data layer <code class="docutils literal notranslate"><span class="pre">Lai_500m</span></code>, visualise another data layer in the LAI dataset. See the table above of <a class="reference external" href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">the product specification</a> for details.</p>
</div>
<div class="section" id="exercise-change-the-product-to-another-on-mota">
<h2>Exercise: change the product to another on MOTA<a class="headerlink" href="#exercise-change-the-product-to-another-on-mota" title="Permalink to this headline">¶</a></h2>
<p>Using the lines of code above, download and visualise a different MODIS product.</p>
<p>You can see the option codes on the server we have been using by <a class="reference external" href="https://e4ftl01.cr.usgs.gov/MOTA">looking in the directory https://e4ftl01.cr.usgs.gov/MOTA</a>.</p>
<p>You get get the meanings of the codes from simply googling them, or you can look them up on the <a class="reference external" href="https://modis.gsfc.nasa.gov/data/dataprod/">MODIS data product page</a>.</p>
<p>### Exercise: Snow</p>
<p>The MODIS snow products are on a different server to the one we used above, <a class="reference external" href="https://n5eil01u.ecs.nsidc.org/MOST"><code class="docutils literal notranslate"><span class="pre">https://n5eil01u.ecs.nsidc.org/MOST</span></code></a> for MODIS Terra data and <a class="reference external" href="https://n5eil01u.ecs.nsidc.org/MOSA"><code class="docutils literal notranslate"><span class="pre">https://n5eil01u.ecs.nsidc.org/MOSA</span></code></a> for MODIS Aqua. Product information is available on the <a class="reference external" href="https://nsidc.org/data/myd10a1">product website</a>. Note that there is not combined Terra and Aqua product.</p>
<p>Use the codes above to explore, download, and plot a snow dataset from the <code class="docutils literal notranslate"><span class="pre">MOD10A1</span></code> product.</p>
<p>### Exercise: Land Cover</p>
<p>The MODIS land cover product is <code class="docutils literal notranslate"><span class="pre">MCD12Q1</span></code>.</p>
<p>Use the codes above to explore, download, and plot a  land cover dataset from the <code class="docutils literal notranslate"><span class="pre">MCD12Q1</span></code> product.</p>
</div>
</div>
<div class="section" id="summary">
<h1>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h1>
<p>In these notes, we have introduced the characteristics of MODIS data products, and learned how to specify, access, and display them for a few servers. You will have accessed a number of products under a number of conditions in the exercises, but you are encouraged to explore this further.</p>
<p>The main item to do with using data products of this sort, that we haven’t covered yet, is the interpretation of Quality Assurance (QA) data. This is often packed information into bits, and can be a little tricky at first. However, as with above, once you have a little familiarisation with a few cases, you will be able to applky this more widely.</p>
<p>You should spend some time going through the various links to explore the different datasets, and try out the exercises above for various products. The familiarity you gain from this will help when it comes to building our own codes later on.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">GEOG0111 Scientific Computing</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, P. Lewis and J. Gomez-Dans.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/022_NASA_MODIS_Earthdata.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>