<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Prof P. Lewis">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Pandas And Plotting - GEOG0111</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Pandas And Plotting";
    var mkdocs_page_input_path = "022_Pandas_and_plotting.md";
    var mkdocs_page_url = "/geog0111/022_Pandas_and_plotting/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> GEOG0111</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="..">Introduction</a>
  </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Course Basics</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../001_Notebook_use/">Notebook Use</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../002_Unix/">Unix</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../003_Help/">Help</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../004_Accounts/">Accounts</a>
  </li>
        
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Answers</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../001_Notebook_use_answers/">Notebook Use</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../002_Unix_answers/">Unix</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../003_Help_answers/">Help</a>
  </li>
        
      </ul>
    </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Core Concepts</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../010_Python_Introduction/">Python Introduction</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../011_Python_data_types/">Python Data Types</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../012_Python_strings/">Python Strings</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../013_Python_string_methods/">Python String Methods</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../014_Python_groups/">Python Groups</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../015_Python_control/">Python Control</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../016_Python_for/">Python For</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../017_Functions/">Functions</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../018_Packages/">Packages</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../019_Running_Python/">Running Python</a>
  </li>
        
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Answers</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../010_Python_Introduction_answers/">Python Introduction</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../011_Python_data_types_answers/">Python Data Types</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../012_Python_strings_answers/">Python Strings</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../013_Python_string_methods_answers/">Python String Methods</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../014_Python_groups_answers/">Python Groups</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../015_Python_control_answers/">Python Control</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../016_Python_for_answers/">Python For</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../017_Functions_answers/">Functions</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../019_Running_Python_answers/">Running Python</a>
  </li>
        
      </ul>
    </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Datasets</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../020_NASA_MODIS_Earthdata/">NASA MODIS Earthdata</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../020_Python_files/">Python Files</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../021_Read_files/">Read Files</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../022_NASA_MODIS_Earthdata/">NASA MODIS Earthdata</a>
  </li>
        
          


  
    
    <li class="navtree toctree-l2 page current">
      <a class="current" href="./">
        Pandas And Plotting
          <span class="toctree-expand"></span>
      </a>
    </li>
    
      

  <li class="toctree-l2 current with-children">
    <a href="#pandas">
      pandas
      <span class="toctree-expand"></span>
    </a>
  </li>




  
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../024_GoogleEarthEngine/">Google Earth Engine</a>
  </li>
        
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Answers</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../020_NASA_MODIS_Earthdata_answers/">NASA MODIS Earthdata</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../020_Python_files_answers/">Python Files</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../021_Read_files_answers/">Read Files</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../022_NASA_MODIS_Earthdata_answers/">NASA MODIS Earthdata</a>
  </li>
        
      </ul>
    </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Image Processing</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../031_Numpy_matplotlib/">Numpy Matplotlib</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../031_Plotting/">Plotting</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Geospatial Data</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../040_GDAL/">GDAL</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../041_MODIS_download/">MODIS Download</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../042_GDAL_masking/">GDAL Masking</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../043_GDAL_stacking_and_interpolating/">GDAL Stacking And Interpolating</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../044_GDAL_Reconciling_projections/">GDAL Reconciling Projections</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Modelling</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../050_Linear_models/">Linear Models</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../051_Modelling_and_optimisation/">Modelling And Optimisation</a>
  </li>
        
      </ul>
    </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Developers</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../DEV_Local_Install/">Local Install</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../DEV_scripts/">Scripts</a>
  </li>
        
      </ul>
    </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">GEOG0111</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Datasets &raquo;</li>
        
      
    
    <li>Pandas And Plotting</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/UCL-EO/geog0111/edit/master/docs/022_Pandas_and_plotting.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="pandas"><code>pandas</code></h2>
<p>For many datasets that we want to access in simple text formats, we can use specialised packages such as <a href="https://pandas.pydata.org/"><code>pandas</code></a>. This is designed for data analysis and manipulation, and so (mostly) makes it easy for the user to read such data.</p>
<pre><code class="python">import pandas as pd
import io
url = &quot;https://www.metoffice.gov.uk/hadobs/hadukp/data/monthly/HadSEEP_monthly_qc.txt&quot;

c=pd.read_csv('https://raw.githubusercontent.com/UCL-EO/geog0111/master/data/2276931.csv')
c
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>STATION</th>
      <th>NAME</th>
      <th>DATE</th>
      <th>PRCP</th>
      <th>SNOW</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-01-01</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-01-02</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-01-03</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-01-04</td>
      <td>0.98</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-01-05</td>
      <td>0.00</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>240</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-08-29</td>
      <td>0.39</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>241</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-08-30</td>
      <td>0.12</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>242</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-08-31</td>
      <td>0.06</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>243</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-09-01</td>
      <td>0.44</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>244</th>
      <td>US1FLGD0002</td>
      <td>HAVANA 4.2 SW, FL US</td>
      <td>2020-09-02</td>
      <td>0.09</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>245 rows × 5 columns</p>
</div>

<pre><code class="python">import matplotlib.pyplot as plt
import matplotlib.dates as mdates

# choose the item to plot
quantity = 'PRCP'

# generate figure an plot
fig, ax = plt.subplots(figsize=(15,3))
ax.plot(c['DATE'],c[quantity])

# format the ticks: every month
months = mdates.MonthLocator() 
ax.xaxis.set_major_locator(months)

plt.title(c['NAME'][0])
plt.ylabel(quantity)
</code></pre>

<pre><code>Text(0, 0.5, 'PRCP')
</code></pre>
<p><img alt="png" src="../022_Pandas_and_plotting_files/022_Pandas_and_plotting_2_1.png" /></p>
<pre><code class="python">from geog0111.gurlpath import URL
url = &quot;https://www.metoffice.gov.uk/hadobs/hadukp/data/monthly/HadSEEP_monthly_qc.txt&quot;

f = URL(url)
</code></pre>

<p>If we examine the data on the website <a href="https://www.metoffice.gov.uk/hadobs/hadukp/data/monthly/HadSEEP_monthly_qc.txt">HadSEEP_monthly_qc.txt</a>, we see that the first 3 lines are metedata. The fourth line specifies the data columns, then the rest are datra values, with <code>-99.9</code> as invalid.</p>
<pre><code class="python">from geog0111.gurlpath import URL
import io

url = &quot;https://www.metoffice.gov.uk/hadobs/hadukp/data/monthly/HadSEEP_monthly_qc.txt&quot;
f = URL(url)

text_data = f.read_text()

</code></pre>

<p>We could do some processing and manipulation of the text data string. For example the following code will split the string on newline <code>\n</code> characters into a list, take the first 6 lines of the list, then join it back again into a string:</p>
<pre><code>'\n'.join(text_data.split('\n')[:6])
</code></pre>
<pre><code class="python">print(f'data read is {len(text_data)} bytes of text data')
print('\n'.join(text_data.split('\n')[:6]))
</code></pre>

<pre><code>data read is 12915 bytes of text data
Monthly Southeast England precipitation (mm). Daily automated values used after 1996.
Wigley &amp; Jones (J.Climatol.,1987), Gregory et al. (Int.J.Clim.,1991)
Jones &amp; Conway (Int.J.Climatol.,1997), Alexander &amp; Jones (ASL,2001). Values may change after QC.
YEAR   JAN   FEB   MAR   APR   MAY   JUN   JUL   AUG   SEP   OCT   NOV   DEC   ANN
 1873  87.1  50.4  52.9  19.9  41.1  63.6  53.2  56.4  62.0  86.0  59.4  15.7  647.7
 1874  46.8  44.9  15.8  48.4  24.1  49.9  28.3  43.6  79.4  96.1  63.9  52.3  593.5
</code></pre>
<p>This is effective, but normally we would use specialised packages designed for reading tabular data of this sort. </p>
<pre><code class="python">import pandas as pd
import io
c=pd.read_table(io.StringIO(f.read_text()),skiprows=3,na_values=[-99.9],sep=r&quot;[ ]{1,}&quot;,engine='python')
c.head()
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>YEAR</th>
      <th>JAN</th>
      <th>FEB</th>
      <th>MAR</th>
      <th>APR</th>
      <th>MAY</th>
      <th>JUN</th>
      <th>JUL</th>
      <th>AUG</th>
      <th>SEP</th>
      <th>OCT</th>
      <th>NOV</th>
      <th>DEC</th>
      <th>ANN</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1873</td>
      <td>87.1</td>
      <td>50.4</td>
      <td>52.9</td>
      <td>19.9</td>
      <td>41.1</td>
      <td>63.6</td>
      <td>53.2</td>
      <td>56.4</td>
      <td>62.0</td>
      <td>86.0</td>
      <td>59.4</td>
      <td>15.7</td>
      <td>647.7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1874</td>
      <td>46.8</td>
      <td>44.9</td>
      <td>15.8</td>
      <td>48.4</td>
      <td>24.1</td>
      <td>49.9</td>
      <td>28.3</td>
      <td>43.6</td>
      <td>79.4</td>
      <td>96.1</td>
      <td>63.9</td>
      <td>52.3</td>
      <td>593.5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1875</td>
      <td>96.9</td>
      <td>39.7</td>
      <td>22.9</td>
      <td>37.0</td>
      <td>39.1</td>
      <td>76.1</td>
      <td>125.1</td>
      <td>40.8</td>
      <td>54.7</td>
      <td>137.7</td>
      <td>106.4</td>
      <td>27.1</td>
      <td>803.5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1876</td>
      <td>31.8</td>
      <td>71.9</td>
      <td>79.5</td>
      <td>63.6</td>
      <td>16.5</td>
      <td>37.2</td>
      <td>22.3</td>
      <td>66.3</td>
      <td>118.2</td>
      <td>34.1</td>
      <td>89.0</td>
      <td>162.9</td>
      <td>793.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1877</td>
      <td>146.0</td>
      <td>47.7</td>
      <td>56.2</td>
      <td>66.4</td>
      <td>62.3</td>
      <td>24.9</td>
      <td>78.5</td>
      <td>82.4</td>
      <td>38.4</td>
      <td>58.1</td>
      <td>144.5</td>
      <td>54.2</td>
      <td>859.6</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="python">import matplotlib.pyplot as plt
plt.plot(c['YEAR'],c['JAN'])
</code></pre>

<pre><code>[&lt;matplotlib.lines.Line2D at 0x7fc2294edc90&gt;]
</code></pre>
<p><img alt="png" src="../022_Pandas_and_plotting_files/022_Pandas_and_plotting_10_1.png" /></p>
<pre><code class="python">
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../024_GoogleEarthEngine/" class="btn btn-neutral float-right" title="Google Earth Engine">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../022_NASA_MODIS_Earthdata/" class="btn btn-neutral" title="NASA MODIS Earthdata"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/UCL-EO/geog0111/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../022_NASA_MODIS_Earthdata/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../024_GoogleEarthEngine/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
