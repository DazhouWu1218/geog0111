


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://ucl-eo.github.io/geog0111/020_NASA_MODIS_Earthdata/">
      
      
        <meta name="author" content="Prof P. Lewis">
      
      <link rel="shortcut icon" href="../images/ucl.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>NASA MODIS Earthdata - GEOG0111</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4dd2dd8d.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-1347772-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nasa-modis-earthdata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ucl-eo.github.io/geog0111" title="GEOG0111" class="md-header-nav__button md-logo" aria-label="GEOG0111">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            GEOG0111
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              NASA MODIS Earthdata
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/UCL-EO/geog0111/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ucl-eo.github.io/geog0111" title="GEOG0111" class="md-nav__button md-logo" aria-label="GEOG0111">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    GEOG0111
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/UCL-EO/geog0111/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Course Basics
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Course Basics" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Course Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../001_Notebook_use/" title="Notebook Use" class="md-nav__link">
      Notebook Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../002_Unix/" title="Unix" class="md-nav__link">
      Unix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../003_Help/" title="Help" class="md-nav__link">
      Help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Answers
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Answers" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        <span class="md-nav__icon md-icon"></span>
        Answers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../001_Notebook_use_answers/" title="Notebook Use" class="md-nav__link">
      Notebook Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../002_Unix_answers/" title="Unix" class="md-nav__link">
      Unix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../003_Help_answers/" title="Help" class="md-nav__link">
      Help
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Core Concepts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Core Concepts" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Core Concepts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../010_Python_Introduction/" title="Python Introduction" class="md-nav__link">
      Python Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../011_Python_data_types/" title="Python Data Types" class="md-nav__link">
      Python Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../012_Python_strings/" title="Python Strings" class="md-nav__link">
      Python Strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../013_Python_string_methods/" title="Python String Methods" class="md-nav__link">
      Python String Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../014_Python_groups/" title="Python Groups" class="md-nav__link">
      Python Groups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../015_Python_control/" title="Python Control" class="md-nav__link">
      Python Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../016_Python_for/" title="Python For" class="md-nav__link">
      Python For
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../017_Functions/" title="Functions" class="md-nav__link">
      Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../018_Python_files/" title="Python Files" class="md-nav__link">
      Python Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../019_Running_Python/" title="Running Python" class="md-nav__link">
      Running Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-11" type="checkbox" id="nav-3-11">
    
    <label class="md-nav__link" for="nav-3-11">
      Answers
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Answers" data-md-level="2">
      <label class="md-nav__title" for="nav-3-11">
        <span class="md-nav__icon md-icon"></span>
        Answers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../010_Python_Introduction_answers/" title="Python Introduction" class="md-nav__link">
      Python Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../011_Python_data_types_answers/" title="Python Data Types" class="md-nav__link">
      Python Data Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../012_Python_strings_answers/" title="Python Strings" class="md-nav__link">
      Python Strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../013_Python_string_methods_answers/" title="Python String Methods" class="md-nav__link">
      Python String Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../014_Python_groups_answers/" title="Python Groups" class="md-nav__link">
      Python Groups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../015_Python_control_answers/" title="Python Control" class="md-nav__link">
      Python Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../016_Python_for_answers/" title="Python For" class="md-nav__link">
      Python For
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../017_Functions_answers/" title="Functions" class="md-nav__link">
      Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../018_Python_files_answers/" title="Python Files" class="md-nav__link">
      Python Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../019_Running_Python_answers/" title="Running Python" class="md-nav__link">
      Running Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Datasets
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Datasets" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Datasets
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        NASA MODIS Earthdata
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="NASA MODIS Earthdata" class="md-nav__link md-nav__link--active">
      NASA MODIS Earthdata
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    Purpose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#earthdata-login" class="md-nav__link">
    Earthdata login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-used" class="md-nav__link">
    Code used
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modis-lai-product" class="md-nav__link">
    MODIS LAI product
  </a>
  
    <nav class="md-nav" aria-label="MODIS LAI product">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-nasa-modis-urls" class="md-nav__link">
    Accessing NASA MODIS URLs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-products" class="md-nav__link">
    Data Products
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mota" class="md-nav__link">
    MOTA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modis-filename-format" class="md-nav__link">
    MODIS filename format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-and-visualising-the-data" class="md-nav__link">
    Getting and visualising the data
  </a>
  
    <nav class="md-nav" aria-label="Getting and visualising the data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grid" class="md-nav__link">
    Grid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download" class="md-nav__link">
    Download
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualise" class="md-nav__link">
    Visualise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../021_GoogleEarthEngine/" title="Google Earth Engine" class="md-nav__link">
      Google Earth Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Answers
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Answers" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        <span class="md-nav__icon md-icon"></span>
        Answers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../020_NASA_MODIS_Earthdata_answers/" title="NASA MODIS Earthdata" class="md-nav__link">
      NASA MODIS Earthdata
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Image Processing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Image Processing" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Image Processing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../031_Numpy_matplotlib/" title="Numpy Matplotlib" class="md-nav__link">
      Numpy Matplotlib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../031_Plotting/" title="Plotting" class="md-nav__link">
      Plotting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Geospatial Data
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Geospatial Data" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Geospatial Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../040_GDAL/" title="GDAL" class="md-nav__link">
      GDAL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../041_MODIS_download/" title="MODIS Download" class="md-nav__link">
      MODIS Download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../042_GDAL_masking/" title="GDAL Masking" class="md-nav__link">
      GDAL Masking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../043_GDAL_stacking_and_interpolating/" title="GDAL Stacking And Interpolating" class="md-nav__link">
      GDAL Stacking And Interpolating
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../044_GDAL_Reconciling_projections/" title="GDAL Reconciling Projections" class="md-nav__link">
      GDAL Reconciling Projections
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Modelling
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Modelling" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Modelling
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../050_Linear_models/" title="Linear Models" class="md-nav__link">
      Linear Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../051_Modelling_and_optimisation/" title="Modelling And Optimisation" class="md-nav__link">
      Modelling And Optimisation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Developers
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Developers" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../DEV_Local_Install/" title="Local Install" class="md-nav__link">
      Local Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DEV_scripts/" title="Scripts" class="md-nav__link">
      Scripts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    Purpose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#credentials" class="md-nav__link">
    Credentials
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#earthdata-login" class="md-nav__link">
    Earthdata login
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-used" class="md-nav__link">
    Code used
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modis-lai-product" class="md-nav__link">
    MODIS LAI product
  </a>
  
    <nav class="md-nav" aria-label="MODIS LAI product">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-nasa-modis-urls" class="md-nav__link">
    Accessing NASA MODIS URLs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-products" class="md-nav__link">
    Data Products
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mota" class="md-nav__link">
    MOTA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modis-filename-format" class="md-nav__link">
    MODIS filename format
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-and-visualising-the-data" class="md-nav__link">
    Getting and visualising the data
  </a>
  
    <nav class="md-nav" aria-label="Getting and visualising the data">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#grid" class="md-nav__link">
    Grid
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download" class="md-nav__link">
    Download
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visualise" class="md-nav__link">
    Visualise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/UCL-EO/geog0111/edit/master/docs/020_NASA_MODIS_Earthdata.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="nasa-modis-earthdata">NASA MODIS Earthdata</h1>
<h2 id="introduction">Introduction</h2>
<h3 id="purpose">Purpose</h3>
<p>In this notebook, we will use high-level codes from <code>geog0111</code> to familiarise ourselves with downloading and interpreting NASA MODIS datasets from <a href="https://urs.earthdata.nasa.gov"><code>NASA EarthData</code></a>. We will also be visualising these data in this notebook.</p>
<p>We will be <strong>introducing NASA MODIS land products</strong>, and viewing the MODIS LAI product as an example. This notebook should serve as an introduction to accessing similar products from Earthdata.</p>
<p>The aim of the codes here is not to provide an exhaustive interface to MODIS data products, although the same scripts should be useable for most, if not all similar products. Rather, it is to use these high-level codes to easily access and visualise the data to understand their properties. </p>
<p>Neither is it to develop or use an <a href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a> to access the data. If all you want is to get hold of some data product for some defined location and time, then you might use an API such as <a href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>.</p>
<p>Students who take the <a href="https://github.com/UCL-EO/geog0111">GEOG0111 course</a> will develop codes along similar lines to this later in the term, so for them, these notes also illustrate some of the things they will be able to do when you have finished this course. For them, we will <em>look under the bonnet</em> of such codes, and learn how to develop them. For others, they can use these codes as they stand to access MODIS data via Earthdata.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Before you can use the material in this notebook, you will need to register as a user at the <a href="https://urs.earthdata.nasa.gov/users/new"><code>NASA EarthData</code></a>.</p>
<p>Once you have done that, make sure you know your <code>username</code> and <code>password</code> ready for below.</p>
<p>The are no assumptions that you know any python code at this point: the use of code should be high enough level that you can easily understand what is going on, and use the constructs shown to modify the codes to your purpose.</p>
<p>For completeness, we list the python and other codes below.</p>
<p>We do assume that you have basic familiarity with using <a href="../001_Notebook_use/">Jupyter notebooks</a>.</p>
<p>You should run through the <a href="#Credentials">Credentials</a> section below before proceeding further with these notes.</p>
<h3 id="credentials">Credentials</h3>
<p>We will store your credentials for [<code>NASA EarthData</code>] (https://urs.earthdata.nasa.gov/users/new) to allow easier data downloading. </p>
<p><strong>N.B. using <code>cylog().login()</code> is only intended to work with access to NASA Earthdata and to prevent you having to expose your username and password in these notes</strong>.</p>
<p>In the <code>geog0111</code> library, we have a Python class called <code>cylog</code>, written to allow easier persistent interface to NASA download servers.</p>
<p>First, we import <code>cylog</code> from the <code>geog0111</code> library.</p>
<p>Run the cell below:</p>
<pre><code class="python">try:
    from geog0111.cylog import cylog
    from geog0111.nasa_requests import test
except:
    raise SystemExit(&quot;Error loading the required uclgeog library&quot;)
</code></pre>

<p>If this gave an error, there is a problem importing the <code>geog0111</code> library and you should get help on this in a support class.</p>
<h3 id="earthdata-login">Earthdata login</h3>
<p>Run the cell below, and enter your <code>username</code> and <code>password</code> if prompted.</p>
<pre><code class="python">cy = cylog(init=True)

# check this has worked
print('has this worked?',test())
</code></pre>

<pre><code>---------------------------------------------------------------------------

StdinNotImplementedError                  Traceback (most recent call last)

&lt;ipython-input-2-7abf596df7a2&gt; in &lt;module&gt;
----&gt; 1 cy = cylog(init=True)
      2 
      3 # check this has worked
      4 print('has this worked?',test())


~/Documents/GitHub/geog0111/notebooks/geog0111/cylog.py in __init__(self, init, destination_folder)
     60             return
     61         else:
---&gt; 62             self._setup(destination_folder=destination_folder)
     63 
     64     def _setup(self,destination_folder='.cylog'):


~/Documents/GitHub/geog0111/notebooks/geog0111/cylog.py in _setup(self, destination_folder)
     63 
     64     def _setup(self,destination_folder='.cylog'):
---&gt; 65         username = input("Enter your username: ")
     66         password = getpass()
     67         key = Fernet.generate_key()


~/anaconda3/envs/geog0111/lib/python3.7/site-packages/ipykernel/kernelbase.py in raw_input(self, prompt)
    856         if not self._allow_stdin:
    857             raise StdinNotImplementedError(
--&gt; 858                 "raw_input was called, but this frontend does not support input requests."
    859             )
    860         return self._input_request(str(prompt),


StdinNotImplementedError: raw_input was called, but this frontend does not support input requests.
</code></pre>
<pre><code class="python">cy.login()
</code></pre>

<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-3-04f472ebef55&gt; in &lt;module&gt;
----&gt; 1 cy.login()


NameError: name 'cy' is not defined
</code></pre>
<p>If you want to force the code to let you re-enter your credentials (e.g. you got it wrong before, or have changed them, or the test fails), then change the call to:</p>
<pre><code>cy = cylog(init=True)
</code></pre>
<p>and re-run.</p>
<p><code>cylog</code> stores your username and password in a file that only you can read. We can use this as a convenient way to pull some NASA MODIS data.</p>
<h3 id="code-used">Code used</h3>
<p>In the code below, we use the following python constructs:</p>
<ul>
<li><a href="https://www.w3schools.com/python/python_modules.asp"><code>import</code> modules</a></li>
<li><a href="https://www.w3schools.com/python/python_try_except.asp#:~:text=The%20try%20block%20lets%20you,the%20try%2D%20and%20except%20blocks.">Error trapping: <code>try ... except</code></a></li>
<li><a href="https://www.w3schools.com/python/ref_keyword_assert.asp"><code>assert</code></a></li>
<li><a href="https://www.w3schools.com/python/python_dictionaries.asp"><code>dictionary</code></a></li>
<li><a href="https://www.w3schools.com/python/ref_func_print.asp"><code>print()</code></a></li>
<li><a href="https://www.w3schools.com/python/ref_string_format.asp">string <code>format()</code></a></li>
<li><a href="https://www.w3schools.com/python/python_variables.asp">variables</a></li>
<li><a href="https://www.w3schools.com/python/gloss_python_function_keyword_arguments.asp">keyword arguments</a></li>
<li><a href="https://numpy.org/doc/stable/reference/generated/numpy.logical_or.html">np.logical_or</a></li>
</ul>
<p>Their meaning should be quite obvious from their context, but we provide links here to materiual at <a href="https://www.w3schools.com/">https://www.w3schools.com/</a> should you wish to understand them further here.</p>
<h2 id="modis-lai-product">MODIS LAI product</h2>
<p>To introduce geospatial processing, we will use a dataset from the MODIS LAI product over the UK. </p>
<p>The data product <a href="https://modis.gsfc.nasa.gov/data/dataprod/mod15.php">MOD15</a> LAI/FPAR has been generated from NASA MODIS sensors Terra and Aqua data since 2002. We are now in dataset collection 6 (the data version to use).</p>
<pre><code>LAI is defined as the one-sided green leaf area per unit ground area in broadleaf canopies and as half the total needle surface area per unit ground area in coniferous canopies. FPAR is the fraction of photosynthetically active radiation (400-700 nm) absorbed by green vegetation. Both variables are used for calculating surface photosynthesis, evapotranspiration, and net primary production, which in turn are used to calculate terrestrial energy, carbon, water cycle processes, and biogeochemistry of vegetation. Algorithm refinements have improved quality of retrievals and consistency with field measurements over all biomes, with a focus on woody vegetation.
</code></pre>
<p>We use such data to map and understand about the dynamics of terrestrial vegetation / carbon, for example, for climate studies.</p>
<p>The raster data are arranged in tiles, indexed by row and column, to cover the globe:</p>
<p><img alt="MODIS tiles" src="https://www.researchgate.net/profile/J_Townshend/publication/220473201/figure/fig5/AS:277546596880390@1443183673583/The-global-MODIS-Sinusoidal-tile-grid.png" /></p>
<h3 id="exercise">Exercise</h3>
<p>The pattern on the tile names is <code>hXXvYY</code> where <code>XX</code> is the horizontal coordinate and <code>YY</code> the vertical.</p>
<ul>
<li>use the map above to work out the names of the two tiles that we will need to access data over the UK</li>
<li>set the variable <code>tiles</code> to contain these two names in a list</li>
</ul>
<p>For example, for the two tiles covering Madagascar, we would set:</p>
<pre><code>tiles = ['h22v10','h22v11']
</code></pre>
<h3 id="accessing-nasa-modis-urls">Accessing NASA MODIS URLs</h3>
<p><span class="burk"><strong>Warning: The NASA data servers tend to be down for maintainance on Wednesday morning EST</strong></span></p>
<p>Although you can access MODIS datasets through the <a href="https://urs.earthdata.nasa.gov/home">NASA Earthdata</a> interface, there are many occasions that we would want to just automatically pull datasets. As we note above, we could use some existing API for this, such as <a href="https://lpdaacsvc.cr.usgs.gov/appeears/">Appeears</a>, but we are aiming here at being able to ultimately develop codes that do this from a lower-level perspective. </p>
<p>Automation has many roles, and is particularly useful when you want a time series of data that might involve many files. For example, for analysing LAI or other variables over space/time) we will want to write code that pulls the time series of data. </p>
<p>If you visit the site <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006</a>, you will see 'date' style links (e.g. <code>2018.09.30</code>) through to sub-directories. </p>
<p>In these, e.g. <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> you will find URLs of a set of files. </p>
<p>The files pointed to by the URLs are the MODIS MOD15 4-day composite 500 m LAI/FPAR product <a href="https://lpdaac.usgs.gov/dataset_discovery/modis/modis_products_table/mcd15a3h_v006">MCD15A3H</a>.</p>
<p>There are links to several datasets on the page, including 'quicklook files' that are jpeg format images of the datasets, e.g.:</p>
<p><img alt="MCD15A3H.A2018273.h17v03" src="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/BROWSE.MCD15A3H.A2018273.h17v03.006.2018278143630.1.jpg" /></p>
<p>as well as <code>xml</code> files and <code>hdf</code> datasets. </p>
<h3 id="data-products">Data Products</h3>
<p>If we look at the dataserver we hae specified <a href="https://e4ftl01.cr.usgs.gov">https://e4ftl01.cr.usgs.gov</a>, we will see that a number of sub-directories exist. Each of these 'server directories' points to a different data stream:</p>
<pre><code>[DIR] ASTT/                   2019-08-05 07:54    -   
[DIR] COMMUNITY/              2020-06-02 08:45    -   
[DIR] ECOSTRESS/              2020-04-09 10:30    -   
[DIR] GEDI/                   2020-02-10 09:58    -   
[DIR] MEASURES/               2020-03-17 10:55    -   
[DIR] MOLA/                   2020-06-01 09:20    -   
[DIR] MOLT/                   2020-04-14 08:06    -   
[DIR] MOTA/                   2019-12-27 06:49    -   
[DIR] VIIRS/                  2020-06-23 10:26    -
</code></pre>
<p>For example, we might notice <a href="https://e4ftl01.cr.usgs.gov/VIIRS">VIIRS</a> which takes us to the <a href="https://viirsland.gsfc.nasa.gov">VIIRS data products</a>, or <a href="https://e4ftl01.cr.usgs.gov/GEDI">GEDI</a> <a href="https://gedi.umd.edu/">spaceborne lidar</a> data. Each of these data streams will have their own properties that we need to appreciate before using them.</p>
<h3 id="mota">MOTA</h3>
<p>The URL we have used above, <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a> starts with a call to the server directory <code>MOTA</code>, so we can think of <code>https://e4ftl01.cr.usgs.gov/MOTA</code> as the base level URL.</p>
<p>MOTA refers to combined MODIS Terra and Aqua datasets. Similarly, MOLA and MOLT refer to datasets generated from single MODIS sensors of Aqua and Terra, respectively.</p>
<p>The rest of the directory information <code>MCD15A3H.006/2018.09.30</code> tells us:</p>
<ul>
<li>the product name <code>MCD15A3H</code></li>
<li>the product version <code>006</code></li>
<li>the date of the dataset <code>2018.09.30</code></li>
</ul>
<p>There are several ways we could specify the date information. The most 'human readable' is probably <code>YYYY.MM.DD</code> as given here. </p>
<h3 id="modis-filename-format">MODIS filename format</h3>
<p>If we vist the link to a particular date for this dataset  <a href="https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/">https://e4ftl01.cr.usgs.gov/MOTA/MCD15A3H.006/2018.09.30/</a>, we see some files that have the suffix <code>hdf</code>.</p>
<p>The <code>hdf</code> filenames are of the form:</p>
<pre><code>MCD15A3H.A2018273.h35v10.006.2018278143650.hdf
</code></pre>
<p>where:</p>
<ul>
<li>the first field (<code>MCD15A3H</code>) gives the product code</li>
<li>the second (<code>A2018273</code>) gives the observation date: day of year <code>273</code>, <code>2018</code> here</li>
<li>the third (<code>h35v10</code>) gives the 'MODIS tile' code for the data location</li>
<li>the remaining fields specify the product version number (<code>006</code>) and a code representing the processing date.</li>
</ul>
<p>If we look at the <a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">product specification page</a> we see that the data product has multiple data layers. In the case of MCD15A3H, this is:</p>
<table>
<thead>
<tr>
<th align="center">SDS Name</th>
<th align="center">Description</th>
<th align="center">Units</th>
<th align="center">Data Type</th>
<th align="center">Fill Value</th>
<th align="center">No Data Value</th>
<th align="center">Valid Range</th>
<th>Scale Factor</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Fpar_500m</td>
<td align="center">Fraction of Photosynthetically Active Radiation</td>
<td align="center">Percent</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">249 to 255</td>
<td align="center">N/A</td>
<td align="center">0 to 100</td>
<td>0.01</td>
</tr>
<tr>
<td align="center">Lai_500m</td>
<td align="center">Leaf Area Index</td>
<td align="center">m²/m²</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">249 to 255</td>
<td align="center">N/A</td>
<td align="center">0 to 100</td>
<td>0.1</td>
</tr>
<tr>
<td align="center">FparLai_QC</td>
<td align="center">Quality for  FPAR and LAI</td>
<td align="center">Class Flag</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">255</td>
<td align="center">N/A</td>
<td align="center">0 to 254</td>
<td>N/A</td>
</tr>
<tr>
<td align="center">FparExtra_QC</td>
<td align="center">Extra detail Quality for  FPAR and LAI</td>
<td align="center">Class Flag</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">255</td>
<td align="center">N/A</td>
<td align="center">0 to 254</td>
<td>N/A</td>
</tr>
<tr>
<td align="center">FparStdDev_500m</td>
<td align="center">Standard deviation of  FPAR</td>
<td align="center">Percent</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">248 to 255</td>
<td align="center">N/A</td>
<td align="center">0 to 100</td>
<td>0.01</td>
</tr>
<tr>
<td align="center">LaiStdDev_500m</td>
<td align="center">Standard deviation of LAI</td>
<td align="center">m²/m²</td>
<td align="center">8-bit unsigned integer</td>
<td align="center">248 to 255</td>
<td align="center">N/A</td>
<td align="center">0 to 100</td>
<td>0.1</td>
</tr>
</tbody>
</table>
<h2 id="getting-and-visualising-the-data">Getting and visualising the data</h2>
<h3 id="grid">Grid</h3>
<p>One thing we might need sometimes is to specify the <code>grid</code> used by the data product. Mostly, this is just the same as the product name (this is the default in our codes by just setting <code>grid</code> to the same as the product name). </p>
<p>For the product <code>MCD15A3H</code> that we use here though, the grid is <code>MOD_Grid_MCD15A3H</code>, so we need to specify this. This issue is something to look out for when you specify a MODIS product you haven't use before. This is not specified in the product user guides or specifications, but you will <em>mostly</em> find it the associated <a href="https://ladsweb.modaps.eosdis.nasa.gov/filespec/MODIS/6/MCD15A3H">file specifications document</a>. When you use a new proiduct then, don't forget to check the appropriate <a href="https://ladsweb.modaps.eosdis.nasa.gov/filespec/MODIS/6">file specifications</a> to find the grid object used!</p>
<p>If you can't find it, just try to use the default (set <code>grid</code> to <code>None</code>).</p>
<p>If that fails to return anything useful, the easiest thinbg to do is to examine the SDS datasets in the file itself.</p>
<p>For example, lets try using the default grid: </p>
<pre><code class="python">from uclgeog.process_timeseries import mosaic, visualise
# libraries we need

#######################
# specify what we want
# in a dictionary
#######################
# UK tiles
# specify day of year (DOY) and year

params = {
    'tiles'   :    ['h17v03', 'h17v04', 'h18v03', 'h18v04'],
    'doy'     :    1,
    'year'    :    2020,
    'product' :    'MCD15A3H',
    'layer'   :    'Lai_500m',
    'grid'    :    None,
    'base_url':   'https://e4ftl01.cr.usgs.gov/MOTA'
}

# check to see if it worked
# and trap errors 
try:
    data = mosaic(params)
    assert data is not None
except AssertionError:
    print(&quot;\nThis hasn't worked&quot;)
else:
    print(&quot;\nThis worked&quot;)
</code></pre>

<pre><code>---------------------------------------------------------------------------

ModuleNotFoundError                       Traceback (most recent call last)

&lt;ipython-input-5-c30899e67e91&gt; in &lt;module&gt;
----&gt; 1 from uclgeog.process_timeseries import mosaic, visualise
      2 # libraries we need
      3 
      4 #######################
      5 # specify what we want


ModuleNotFoundError: No module named 'uclgeog'
</code></pre>
<p>The code exits with the message:</p>
<pre><code>    failed to warp ['HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf":MCD15A3H:Lai_500m', 'HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h17v04.006.2020006031910.hdf":MCD15A3H:Lai_500m', 'HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h18v03.006.2020006033540.hdf":MCD15A3H:Lai_500m', 'HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h18v04.006.2020006032422.hdf":MCD15A3H:Lai_500m'] 2020, 1, ['h17v03', 'h17v04', 'h18v03', 'h18v04'], data/
</code></pre>
<p>This is telling us that it has tried to access a dataset</p>
<pre><code>HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf":MCD15A3H:Lai_500m
</code></pre>
<p>and this is where it has failed.</p>
<p>We could use python calls to check what this should be, but we mostly find it easier to use system tool, <code>gdalinfo</code> in this case. <a href="https://gdal.org/"><code>gdal</code></a> is software for geospatial processing that can deal with a wide range of formats. We will make a lot of use of it later on.</p>
<p>For now, we can run a system command below to see what the SDS <code>Lai_500m</code> looks like in one of the files it has downloaded (we get the filename from the list reported above).</p>
<pre><code class="python">!gdalinfo data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf | grep Lai_500m
</code></pre>

<pre><code>ERROR 4: data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf: No such file or directory
gdalinfo failed - unable to open 'data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf'.
</code></pre>
<p>From this, we see that the dataset specification is really </p>
<pre><code>HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf":MOD_Grid_MCD15A3H:Lai_500m
</code></pre>
<p>and not what we previously assumed:</p>
<pre><code>HDF4_EOS:EOS_GRID:"data/MCD15A3H.A2020001.h17v03.006.2020006031702.hdf":MCD15A3H:Lai_500m
</code></pre>
<p>We have most of the specification correct, but have used <code>MCD15A3H:Lai_500m</code> instead of <code>MOD_Grid_MCD15A3H:Lai_500m</code>. Let's fix this now:</p>
<pre><code class="python">from uclgeog.process_timeseries import mosaic, visualise
# libraries we need

#######################
# specify what we want
# in a dictionary
#######################
# UK tiles
# specify day of year (DOY) and year

params = {
    'tiles'   :    ['h17v03', 'h17v04', 'h18v03', 'h18v04'],
    'doy'     :    1,
    'year'    :    2020,
    'product' :    'MCD15A3H',
    'layer'   :    'Lai_500m',
    'grid'    :    'MOD_Grid_MCD15A3H',
    'base_url':   'https://e4ftl01.cr.usgs.gov/MOTA'

}

# check to see if it worked
# and trap errors 
try:
    data = mosaic(params)
    assert data is not None
except AssertionError:
    print(&quot;\nThis hasn't worked&quot;)
else:
    print(&quot;\nThis worked&quot;)
</code></pre>

<pre><code>---------------------------------------------------------------------------

ModuleNotFoundError                       Traceback (most recent call last)

&lt;ipython-input-7-713060207b13&gt; in &lt;module&gt;
----&gt; 1 from uclgeog.process_timeseries import mosaic, visualise
      2 # libraries we need
      3 
      4 #######################
      5 # specify what we want


ModuleNotFoundError: No module named 'uclgeog'
</code></pre>
<h3 id="download">Download</h3>
<p>So, other than some terms (e.g. version number) we can take as defaults, when we want to access a MODIS product as tile data, we need to specify:</p>
<ul>
<li>product code</li>
<li>SDS Name (scientific dataset name)</li>
<li>tile(s)</li>
<li>day of year (DOY)</li>
<li>year</li>
</ul>
<p>Now we have some appreciation of the MODIS dataset description requirements, we can use the method <code>mosaic_and_clip()</code> in <code>uclgeog</code> to download some example datasets:</p>
<pre><code># UK tiles
tiles = ['h17v03', 'h17v04', 'h18v03', 'h18v04']
# specify day of year (DOY) and year
doy,year = 1,2020
# product
product = 'MCD15A3H'
# SDS
layer = "Lai_500m"
# grid
grid = 'MOD_Grid_MCD15A3H'
</code></pre>
<p>One useful thing we have implemented in <code>mosaic_and_clip()</code> is to mosaic data from different tiles together into one contiguous dataset. So, although we will have data specified over four tiles, we will mosaic it together into a single array.</p>
<pre><code class="python">from uclgeog.process_timeseries import mosaic_and_clip, visualise
import numpy as np
# libraries we need

#######################
# specify what we want
# in a dictionary
#######################
# UK tiles
# specify day of year (DOY) and year

params = {
    'tiles'   :    ['h17v03', 'h17v04', 'h18v03', 'h18v04'],
    'doy'     :    1,
    'year'    :    2020,
    'product' :    'MCD15A3H',
    'layer'   :    'Lai_500m',
    'grid'    :    'MOD_Grid_MCD15A3H',
    'verbose' :    True,
    'base_url':   'https://e4ftl01.cr.usgs.gov/MOTA'
}

#######################
# download and interpret
# and mask non-valid numbers by setting to NaN
# see data table above
#######################
try:
    data = mosaic(params)
    assert data is not None
except AssertionError:
    print(&quot;\nThis hasn't worked&quot;)
else:
    data = data.astype(float)
    data[data&gt;248] = np.nan
    #######################
    # print some feedback
    #######################
    print(f'the variable lai contains a dataset of dimension {data.shape}')
    print('for product {product} SDS {layer}'.format(**params))
    print('for day {doy} of year {year} for tiles {tiles}'.format(**params))

</code></pre>

<pre><code>---------------------------------------------------------------------------

ModuleNotFoundError                       Traceback (most recent call last)

&lt;ipython-input-8-ea8b28754648&gt; in &lt;module&gt;
----&gt; 1 from uclgeog.process_timeseries import mosaic_and_clip, visualise
      2 import numpy as np
      3 # libraries we need
      4 
      5 #######################


ModuleNotFoundError: No module named 'uclgeog'
</code></pre>
<h3 id="visualise">Visualise</h3>
<p>We have now generated a dataset, stored in a variable <code>lai</code>. We are likely to want to perform some analysis on this, but we might also like to visualise the dataset.</p>
<p>We can do this using a python package <a href="https://matplotlib.org">matplotlib</a> that we will gain more experience with later.</p>
<p>For now, we will simply implement a typical image visualisation, with a dataset title, and scale bar. We will use a method <code>visualise()</code> from our <code>uclgeog</code> library to do this.</p>
<pre><code class="python"># call visualise
title = 'product {product} SDS {layer}\n'.format(**params) + \
        'for day {doy} of year {year} for tiles {tiles}'.format(**params)
# set the max value to 3.0 to be able to see whats going on
plot=visualise(data,title=title,vmax=3.0)
</code></pre>

<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-9-3c8c8e941134&gt; in &lt;module&gt;
      1 # call visualise
----&gt; 2 title = 'product {product} SDS {layer}\n'.format(**params) + \
      3         'for day {doy} of year {year} for tiles {tiles}'.format(**params)
      4 # set the max value to 3.0 to be able to see whats going on
      5 plot=visualise(data,title=title,vmax=3.0)


NameError: name 'params' is not defined
</code></pre>
<h1 id="exercises">Exercises</h1>
<h3 id="exercise-change-the-year-and-doy">Exercise: change the year and DOY</h3>
<p>Using the lines of code above, download and visualise the LAI dataset for a different DOY and year. Remember that it is a 4-day synthesis, so there are only datasets on doy 1,5,9, ...</p>
<p>Put comments in your code using <code>#</code> to start a comment, to describe what you are doing.</p>
<p>You might want to set <code>verbose</code> to <code>True</code> to get some feedback on what is going on.</p>
<h3 id="exercise-change-the-location">Exercise: change the location</h3>
<p>Using the lines of code above, download and visualise the LAI dataset for a different location.</p>
<p>You will need to specify the tile or tiles that you wish to use.</p>
<p>As before, put comments in your code using <code>#</code> to start a comment, to describe what you are doing.</p>
<p>You might want to set <code>verbose</code> to <code>True</code> to get some feedback on what is going on.</p>
<h3 id="exercise-change-the-sds">Exercise: change the SDS</h3>
<p>Using the lines of code above, download and visualise the LAI dataset for a different location. </p>
<p>Now, instead of using the data layer <code>Lai_500m</code>, visualise another data layer in the LAI dataset. See the table above of <a href="https://lpdaac.usgs.gov/products/mcd15a3hv006/">the product specification</a> for details.</p>
<h3 id="exercise-change-the-product-to-another-on-mota">Exercise: change the product to another on MOTA</h3>
<p>Using the lines of code above, download and visualise a different MODIS product.</p>
<p>You can see the option codes on the server we have been using by <a href="https://e4ftl01.cr.usgs.gov/MOTA">looking in the directory https://e4ftl01.cr.usgs.gov/MOTA</a>.</p>
<p>You get get the meanings of the codes from simply googling them, or you can look them up on the <a href="https://modis.gsfc.nasa.gov/data/dataprod/">MODIS data product page</a>.</p>
<h3 id="exercise-snow">Exercise: Snow</h3>
<p>The MODIS snow products are on a different server to the one we used above, <a href="https://n5eil01u.ecs.nsidc.org/MOST"><code>https://n5eil01u.ecs.nsidc.org/MOST</code></a> for MODIS Terra data and <a href="https://n5eil01u.ecs.nsidc.org/MOSA"><code>https://n5eil01u.ecs.nsidc.org/MOSA</code></a> for MODIS Aqua. Product information is available on the <a href="https://nsidc.org/data/myd10a1">product website</a>. Note that there is not combined Terra and Aqua product.</p>
<p>Use the codes above to explore, download, and plot a snow dataset from the <code>MOD10A1</code> product.</p>
<h3 id="exercise-land-cover">Exercise: Land Cover</h3>
<p>The MODIS land cover product is <code>MCD12Q1</code>.</p>
<p>Use the codes above to explore, download, and plot a  land cover dataset from the <code>MCD12Q1</code> product.</p>
<h1 id="summary">Summary</h1>
<p>In these notes, we have introduced the characteristics of MODIS data products, and learned how to specify, access, and display them for a few servers. You will have accessed a number of products under a number of conditions in the exercises, but you are encouraged to explore this further.</p>
<p>The main item to do with using data products of this sort, that we haven't covered yet, is the interpretation of Quality Assurance (QA) data. This is often packed information into bits, and can be a little tricky at first. However, as with above, once you have a little familiarisation with a few cases, you will be able to applky this more widely.</p>
<p>You should spend some time going through the various links to explore the different datasets, and try out the exercises above for various products. The familiarity you gain from this will help when it comes to building our own codes later on.</p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 9, 2020</span>
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../019_Running_Python_answers/" title="Running Python" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Running Python
              </div>
            </div>
          </a>
        
        
          <a href="../021_GoogleEarthEngine/" title="Google Earth Engine" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Google Earth Engine
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://twitter.com/prof_plewis" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://hub.docker.com/r/proflewis/geog0111" target="_blank" rel="noopener" title="hub.docker.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://github.com/UCL-EO/geog0111" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["search.highlight", "header.hide"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>